
Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://172.21.46.28:8501
  External URL: http://47.251.78.182:8501

  Stopping...
Traceback (most recent call last):
  File "/home/to_NM/demo_NM/teaching_api.py", line 5, in <module>
    from sentence_transformers import SentenceTransformer
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/sentence_transformers/__init__.py", line 7, in <module>
    from sentence_transformers.cross_encoder.CrossEncoder import CrossEncoder
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/sentence_transformers/cross_encoder/__init__.py", line 1, in <module>
    from .CrossEncoder import CrossEncoder
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/sentence_transformers/cross_encoder/CrossEncoder.py", line 7, in <module>
    import torch
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/torch/__init__.py", line 239, in <module>
    from torch._C import *  # noqa: F403
KeyboardInterrupt
 * Serving Flask app 'teaching_api'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8891
[33mPress CTRL+C to quit[0m
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
127.0.0.1 - - [12/Jun/2024 18:37:04] "POST /load HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 18:38:41] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 18:39:08] "POST /chat HTTP/1.1" 200 -

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://172.21.46.28:8501
  External URL: http://47.251.70.221:8501

127.0.0.1 - - [12/Jun/2024 18:43:44] "POST /load HTTP/1.1" 200 -
/root/miniconda3/envs/embedding/lib/python3.10/site-packages/pydub/utils.py:170: RuntimeWarning: Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work
  warn("Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work", RuntimeWarning)
127.0.0.1 - - [12/Jun/2024 18:44:12] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 18:47:45] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 18:48:08] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 18:48:17] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 18:48:21] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 18:49:34] "POST /load HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 18:49:56] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 18:50:35] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 18:50:47] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 18:56:27] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 18:56:35] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 18:57:04] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 18:57:06] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 18:57:15] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 18:57:45] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 18:57:53] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 18:57:59] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 18:58:08] "POST /chat HTTP/1.1" 200 -
../knowledge_base_new/modified_25_翼状胬肉_1.json
成功创建知识库
------------ chatZOC api called -------------------------

student_id: 202452342 user input: 你眼睛怎么不舒服？
----------------ChatZOC database log ----------------

distsnce: [0.11718373000621796, 0.22479842603206635, 0.23653897643089294] 

知识库所有match: ['您眼睛有什么不舒服？', '您眼睛有什么不适感？', '眼睛还有别的不舒服吗？']


知识库选择: 我的眼睛上长了一个三角形的东西
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: 202452342 user input: 你的眼睛怎么了
----------------ChatZOC database log ----------------

distsnce: [0.19509637355804443, 0.2064376175403595, 0.3570922017097473] 

知识库所有match: ['你眼睛怎么回事？', '眼睛怎么了？', '你的眼睛干吗？']


知识库选择: 我的眼睛上长了一个三角形的东西
----------------ChatZOC database log over ----------------
../knowledge_base_new/modified_25_翼状胬肉_1.json
成功创建知识库
------------ chatZOC api called -------------------------

student_id: 12356 user input: 你的眼睛怎么了
----------------ChatZOC database log ----------------

distsnce: [0.19509637355804443, 0.2064376175403595, 0.3570922017097473] 

知识库所有match: ['你眼睛怎么回事？', '眼睛怎么了？', '你的眼睛干吗？']


知识库选择: 我的眼睛上长了一个三角形的东西
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: 12356 user input: 帮我解决你的问题
------------ chatZOC api called -------------------------

student_id: 12356 user input: 你结婚了吗？
----------------ChatZOC database log ----------------

distsnce: [0.003782754298299551, 0.0351625457406044, 0.09223277866840363] 

知识库所有match: ['您结婚了吗？', '您是否结婚了？', '您是否已婚？']


知识库选择: 我结婚了
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: 12356 user input: 你结婚了吗？
----------------ChatZOC database log ----------------

distsnce: [0.003782754298299551, 0.0351625457406044, 0.09223277866840363] 

知识库所有match: ['您结婚了吗？', '您是否结婚了？', '您是否已婚？']


知识库选择: 我结婚了
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: 12356 user input: 你结婚了吗？
----------------ChatZOC database log ----------------

distsnce: [0.003782754298299551, 0.0351625457406044, 0.09223277866840363] 

知识库所有match: ['您结婚了吗？', '您是否结婚了？', '您是否已婚？']


知识库选择: 我结婚了
----------------ChatZOC database log over ----------------
../knowledge_base_new/modified_25_翼状胬肉_1.json
成功创建知识库
------------ chatZOC api called -------------------------

student_id: 12356 user input: 你头痛怎么了
----------------ChatZOC database log ----------------

distsnce: [0.34495335817337036, 0.38481128215789795, 0.421878844499588] 

知识库所有match: ['您是否有头痛的症状？', '您是否感到头痛？', '有没有头痛？']


知识库选择: 我的头不疼
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: 12356 user input: 你服用过任何药物吗？
----------------ChatZOC database log ----------------

distsnce: [0.23322917520999908, 0.2477521300315857, 0.28777214884757996] 

知识库所有match: ['你有自己吃药吗？', '有服用过什么药物吗', '有用过什么药物？']


知识库选择: 我没有去医院看过，也没有用过眼药水
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: 12356 user input: 你服用过任何药物吗？
----------------ChatZOC database log ----------------

distsnce: [0.23322917520999908, 0.2477521300315857, 0.28777214884757996] 

知识库所有match: ['你有自己吃药吗？', '有服用过什么药物吗', '有用过什么药物？']


知识库选择: 我没有去医院看过，也没有用过眼药水
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: 12356 user input: 你有糖尿病吗
----------------ChatZOC database log ----------------

distsnce: [0.3105771541595459, 0.31727319955825806, 0.32350122928619385] 

知识库所有match: ['您在过去是否有糖尿病的情况？', '是否确诊过糖尿病？', '您之前是否有糖尿病的病史？']


知识库选择: 我没有糖尿病
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: 12356 user input: 你有糖尿病吗
----------------ChatZOC database log ----------------

distsnce: [0.3105771541595459, 0.31727319955825806, 0.32350122928619385] 

知识库所有match: ['您在过去是否有糖尿病的情况？', '是否确诊过糖尿病？', '您之前是否有糖尿病的病史？']


知识库选择: 我没有糖尿病
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: 12356 user input: 而且不按next，还可以在输入框内输入问题，而且回车还会进去，这个肯定有问题。
------------ chatZOC api called -------------------------

student_id: 12356 user input: 而且不按next，还可以在输入框内输入问题，而且回车还会进去，这个肯定有问题。
------------ chatZOC api called -------------------------

student_id: 12356 user input: 而且不按next，还可以在输入框内输入问题，而且回车还会进去，这个肯定有问题。
------------ chatZOC api called -------------------------

student_id: 12356 user input: 你叫什么名字
----------------ChatZOC database log ----------------

distsnce: [0.04317820817232132, 0.16676577925682068, 0.24755516648292542] 

知识库所有match: ['您叫什么名字？', '您的名字是什么？', '您叫什么？']


知识库选择: 我叫陈某某
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: 12356 user input: 你是男的吗？
----------------ChatZOC database log ----------------

distsnce: [0.10223239660263062, 0.16939657926559448, 0.16939657926559448] 

知识库所有match: ['你是男是女？', '你是男的还是女的？', '你是男的还是女的？']


知识库选择: 我是男的
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: 12356 user input: 你有过敏吗？
----------------ChatZOC database log ----------------

distsnce: [0.30603301525115967, 0.3066159784793854, 0.32526251673698425] 

知识库所有match: ['您之前是否有药物过敏的情况？', '您是否曾经出现过药物过敏？', '你之前有没有药物过敏？']


知识库选择: 我没有药物过敏
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: 12356 user input: 你有过敏吗？
----------------ChatZOC database log ----------------

distsnce: [0.30603301525115967, 0.3066159784793854, 0.32526251673698425] 

知识库所有match: ['您之前是否有药物过敏的情况？', '您是否曾经出现过药物过敏？', '你之前有没有药物过敏？']


知识库选择: 我没有药物过敏
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: 12356 user input: 你有食物过敏吗？
----------------ChatZOC database log ----------------

distsnce: [0.1286655068397522, 0.13331598043441772, 0.16683804988861084] 

知识库所有match: 127.0.0.1 - - [12/Jun/2024 18:58:15] "POST /chat HTTP/1.1" 200 -
2024-06-12 19:00:03.351 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 640, in <module>
    save_point_15min(state_goal=st.session_state.state_goal, points=st.session_state.point,full_point=st.session_state.state_all,timess=passed_time, option=st.session_state.option, student_id=st.session_state.student_id, file_path="student_goal.txt")
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 185, in save_point_15min
    state_out = {"student_id":student_id,"test_option":option,"student_points":round(points/full_point*100,2),"exam_time":timess}
ZeroDivisionError: division by zero
 * Detected change in '/home/to_NM/demo_NM/SP_choose.py', reloading
 * Detected change in '/home/to_NM/demo_NM/SP_choose.py', reloading
 * Detected change in '/home/to_NM/demo_NM/SP_choose.py', reloading
['您之前是否有食物过敏的情况？', '您是否曾经出现过食物过敏？', '你之前有没有食物过敏？']


知识库选择: 没有食物过敏
----------------ChatZOC database log over ----------------
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
 * Detected change in '/home/to_NM/demo_NM/SP_choose.py', reloading
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
127.0.0.1 - - [12/Jun/2024 19:21:52] "POST /load HTTP/1.1" 200 -
2024-06-12 19:21:55.319 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 520, in <module>
    st.image(photo,width=496)
NameError: name 'photo' is not defined
 * Detected change in '/home/to_NM/demo_NM/pages/begin_asking.py', reloading
../knowledge_base_new/modified_8_麦粒肿_1.json
成功创建知识库
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
127.0.0.1 - - [12/Jun/2024 19:23:42] "POST /load HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 19:24:01] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 19:24:11] "POST /chat HTTP/1.1" 200 -
 * Detected change in '/home/to_NM/demo_NM/SP_choose.py', reloading
 * Detected change in '/home/to_NM/demo_NM/SP_choose.py', reloading
../knowledge_base_new/modified_8_麦粒肿_1.json
成功创建知识库
------------ chatZOC api called -------------------------

student_id: uiui user input: 你叫什么名字
----------------ChatZOC database log ----------------

distsnce: [0.04317820817232132, 0.16676577925682068, 0.24755516648292542] 

知识库所有match: ['您叫什么名字？', '您的名字是什么？', '您叫什么？']


知识库选择: 冯某某    
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: uiui user input: 你是谁
----------------ChatZOC database log ----------------

distsnce: [0.3074830174446106, 0.4968374967575073, 0.5782204270362854] 

知识库所有match: ['您是哪里人？', '您是哪个地方的人？', '您的名字是什么？']


知识库选择: 我是广东广州人
----------------ChatZOC database log over ----------------
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
 * Detected change in '/home/to_NM/demo_NM/pages/begin_asking.py', reloading
 * Detected change in '/home/to_NM/demo_NM/pages/begin_asking.py', reloading
 * Detected change in '/home/to_NM/demo_NM/pages/begin_asking.py', reloading
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
 * Detected change in '/home/to_NM/demo_NM/pages/begin_asking.py', reloading
 * Detected change in '/home/to_NM/demo_NM/pages/begin_asking.py', reloading
 * Detected change in '/home/to_NM/demo_NM/pages/begin_asking.py', reloading
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
127.0.0.1 - - [12/Jun/2024 20:04:01] "POST /load HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 20:04:22] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 20:04:52] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 20:05:00] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 20:05:06] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 20:09:24] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 20:10:12] "POST /chat HTTP/1.1" 200 -
2024-06-12 20:10:21.090 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 470, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
127.0.0.1 - - [12/Jun/2024 20:10:43] "POST /load HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 20:10:52] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 20:10:56] "[35m[1mPOST /chat HTTP/1.1[0m" 500 -
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/flask/app.py", line 1498, in __call__
    return self.wsgi_app(environ, start_response)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/flask/app.py", line 1476, in wsgi_app
    response = self.handle_exception(e)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/flask/app.py", line 1473, in wsgi_app
    response = self.full_dispatch_request()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/flask/app.py", line 882, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/flask/app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/flask/app.py", line 865, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/to_NM/demo_NM/teaching_api.py", line 342, in chat_with_chatZOC
    response = send_to_llm(new_prompt)
NameError: name 'send_to_llm' is not defined. Did you mean: 'send_to_api_llm'?
2024-06-12 20:10:56.884 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 554, in <module>
    output = json.loads(response_with_state.text)['response']
  File "/root/miniconda3/envs/embedding/lib/python3.10/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
  File "/root/miniconda3/envs/embedding/lib/python3.10/json/decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/root/miniconda3/envs/embedding/lib/python3.10/json/decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
127.0.0.1 - - [12/Jun/2024 20:11:04] "POST /chat HTTP/1.1" 200 -
2024-06-12 21:48:28.420 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 470, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
 * Detected change in '/home/to_NM/demo_NM/teaching_api.py', reloading
 * Detected change in '/home/to_NM/demo_NM/teaching_api.py', reloading
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
------------ chatZOC api called -------------------------

student_id: 123 user input: 你的眼睛出了什么问题
----------------ChatZOC database log ----------------

distsnce: [0.15137827396392822, 0.22770553827285767, 0.3048394024372101] 

知识库所有match: ['你哪只眼睛出问题了？', '您眼睛出现了什么样的问题或症状？', '你眼睛怎么回事？']


知识库选择: 是左眼不舒服
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: 123 user input: 你的眼睛出了什么问题
----------------ChatZOC database log ----------------

distsnce: [0.15137827396392822, 0.22770553827285767, 0.3048394024372101] 

知识库所有match: ['你哪只眼睛出问题了？', '您眼睛出现了什么样的问题或症状？', '你眼睛怎么回事？']


知识库选择: 是左眼不舒服
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: 123 user input: 你的眼睛出了什么问题
----------------ChatZOC database log ----------------

distsnce: [0.15137827396392822, 0.22770553827285767, 0.3048394024372101] 

知识库所有match: ['你哪只眼睛出问题了？', '您眼睛出现了什么样的问题或症状？', '你眼睛怎么回事？']


知识库选择: 是左眼不舒服
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: 123 user input: 你的眼睛出了什么问题
----------------ChatZOC database log ----------------

distsnce: [0.15137827396392822, 0.22770553827285767, 0.3048394024372101] 

知识库所有match: ['你哪只眼睛出问题了？', '您眼睛出现了什么样的问题或症状？', '你眼睛怎么回事？']


知识库选择: 是左眼不舒服
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: 123 user input: 你的眼睛怎么了
----------------ChatZOC database log ----------------

distsnce: [0.19509637355804443, 0.2064376175403595, 0.3570922017097473] 

知识库所有match: ['你眼睛怎么回事？', '眼睛怎么了？', '你的眼睛干吗？']


知识库选择: 我的眼睛突然疼痛、发红，看不清东西
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: 123 user input: 你有没有药物过敏
----------------ChatZOC database log ----------------

distsnce: [0.1789541244506836, 0.36856570839881897, 0.3819444477558136] 

知识库所有match: ['你之前有没有药物过敏？', '您之前是否有药物过敏的情况？', '你之前有没有食物过敏？']


知识库选择: 我没有药物过敏
----------------ChatZOC database log over ----------------
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
------------ chatZOC api called -------------------------

student_id: 123 user input: 药物过敏？
----------------ChatZOC database log ----------------

distsnce: [0.17224940657615662, 0.26930564641952515, 0.29452237486839294] 

知识库所有match: ['有对什么药物过敏吗？', '您之前是否有药物过敏的情况？', '您是否曾经出现过药物过敏？']


知识库选择: 我没有药物过敏
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: 123 user input: 食物过敏
----------------ChatZOC database log ----------------

distsnce: [0.3903549909591675, 0.4789039194583893, 0.5185356140136719] 

知识库所有match: ['有对什么食物过敏吗？', '您之前是否有食物过敏的情况？', '你之前有没有食物过敏？']


知识库选择: 没有食物过敏
没有食物过敏
没有食物过敏
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
没有食物过敏
没有食物过敏
没有食物过敏

#医生问题#
食物过敏
------------ chatZOC api called -------------------------

student_id: 123 user input: 食物过敏？
----------------ChatZOC database log ----------------

distsnce: [0.15496718883514404, 0.24833473563194275, 0.27975791692733765] 

知识库所有match: ['有对什么食物过敏吗？', '您之前是否有食物过敏的情况？', '您是否曾经出现过食物过敏？']


知识库选择: 没有食物过敏
----------------ChatZOC database log over ----------------
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
127.0.0.1 - - [12/Jun/2024 22:59:08] "POST /load HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 22:59:40] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 23:00:13] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 23:00:25] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 23:00:47] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 23:00:59] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 23:02:51] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 23:03:21] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 23:03:30] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 23:04:02] "POST /chat HTTP/1.1" 200 -
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
------------ chatZOC api called -------------------------

student_id: hgjg user input: 你的眼睛有什么不舒服？之前有没有给医生看过呀，大概是什么问题知道吗
----------------ChatZOC database log ----------------

distsnce: [0.24002203345298767, 0.26533693075180054, 0.29158926010131836] 

知识库所有match: ['您眼睛有什么不舒服？', '您的眼睛还有没有其他不舒服的症状？', '您眼睛是什么地方不舒服？']


知识库选择: 我的眼睛突然疼痛、发红，看不清东西
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: hgjg user input: 你知道你这属于青光眼吗
----------------ChatZOC database log ----------------

distsnce: [0.6277573108673096, 0.6419177651405334, 0.6444166898727417] 

知识库所有match: ['您的眼睛是否对光线敏感？', '您是否觉得眼睛干涩？', '您的眼睛是否对光敏感？']


知识库选择: 是的，很怕光
我眼睛没有干涩
是的，很怕光
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
是的，很怕光
我眼睛没有干涩
是的，很怕光

#医生问题#
你知道你这属于青光眼吗
response: nMessage(content='我不知道。'



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
是的，很怕光
我眼睛没有干涩
是的，很怕光

#医生问题#
你知道你这属于青光眼吗

**************FINISHED*****************



------------ chatZOC api called -------------------------

student_id: hgjg user input: 你知道这属于青光眼吗
prev_flag: 1 <class 'int'> <class 'int'>
------------ chatZOC api called -------------------------

student_id: hgjg user input: 你知道自己这个是什么疾病吗
----------------ChatZOC database log ----------------

distsnce: [0.5422889590263367, 0.5521957278251648, 0.5636588335037231] 

知识库所有match: ['请问您家里人有相类似的疾病吗？', '请问一下有什么基础病吗？', '请问你还有其他的什么症状吗？']


知识库选择: 没有
没有
感觉眼睛怕光，很容易流眼泪
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
没有
没有
感觉眼睛怕光，很容易流眼泪

#医生问题#
你知道自己这个是什么疾病吗
response: nMessage(content='我不知道。'



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
没有
没有
感觉眼睛怕光，很容易流眼泪

#医生问题#
你知道自己这个是什么疾病吗

**************FINISHED*****************



------------ chatZOC api called -------------------------

student_id: hgjg user input: 你知道自己这个是什么疾病吗
----------------ChatZOC database log ----------------

distsnce: [0.5422889590263367, 0.5521957278251648, 0.5636588335037231] 

知识库所有match: ['请问您家里人有相类似的疾病吗？', '请问一下有什么基础病吗？', '请问你还有其他的什么症状吗？']


知识库选择: 没有
没有
感觉眼睛怕光，很容易流眼泪
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
没有
没有
感觉眼睛怕光，很容易流眼泪

#医生问题#
你知道自己这个是什么疾病吗
response: nMessage(content='我不知道。'



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
没有
没有
感觉眼睛怕光，很容易流眼泪

#医生问题#
你知道自己这个是什么疾病吗

**************FINISHED*****************



------------ chatZOC api called -------------------------

student_id: hgjg user input: 你好
prev_flag: 1 <class 'int'> <class 'int'>
------------ chatZOC api called -------------------------

student_id: hgjg user input: 你的眼睛出现这种情况多久了
----------------ChatZOC database log ----------------

distsnce: [0.5145777463912964, 0.5180523991584778, 0.5233256220817566] 

知识库所有match: ['您眼睛出现了什么样的问题或症状？', '您的眼睛在出现这些症状之前是否受伤过？', '眼睛看不清多久了？']


知识库选择: 我的眼睛突然疼痛、发红，看不清东西
我的眼睛没有受伤
昨天开始的
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我的眼睛突然疼痛、发红，看不清东西
我的眼睛没有受伤
昨天开始的

#医生问题#
你的眼睛出现这种情况多久了
response: nMessage(content='这种情况开始于昨天。'



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我的眼睛突然疼痛、发红，看不清东西
我的眼睛没有受伤
昨天开始的

#医生问题#
你的眼睛出现这种情况多久了

**************FINISHED*****************



------------ chatZOC api called -------------------------

student_id: hgjg user input: 你的眼睛出现这种情况多久了
----------------ChatZOC database log ----------------

distsnce: [0.5145777463912964, 0.5180523991584778, 0.5233256220817566] 

知识库所有match: ['您眼睛出现了什么样的问题或症状？', '您的眼睛在出现这些症状之前是否受伤过？', '眼睛看不清多久了？']


知识库选择: 我的眼睛突然疼痛、发红，看不清东西
我的眼睛没有受伤
昨天开始的
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我的眼睛突然疼痛、发红，看不清东西
我的眼睛没有受伤
昨天开始的

#医生问题#
你的眼睛出现这种情况多久了
response: nMessage(content='这种情况开始于昨天。'



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我的眼睛突然疼痛、发红，看不清东西
我的眼睛没有受伤
昨天开始的

#医生问题#
你的眼睛出现这种情况多久了

**************FINISHED*****************



------------ chatZOC api called -------------------------

student_id: hgjg user input: 你现在感觉怎么样
prev_flag: 1 <class 'int'> <class 'int'>
------------ chatZOC api called -------------------------

student_id: hgjg user input: 你现在眼睛感觉怎么样
----------------ChatZOC database log ----------------

127.0.0.1 - - [12/Jun/2024 23:04:17] "POST /chat HTTP/1.1" 200 -
distsnce: [0.40338441729545593, 0.45308971405029297, 0.45878762006759644] 

知识库所有match: ['你眼睛怎么回事？', '您眼睛有什么不适感？', '您是否觉得眼睛干涩？']


知识库选择: 我的眼睛突然疼痛、发红，看不清东西
我的眼睛突然疼痛、发红，看不清东西
我眼睛没有干涩
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我的眼睛突然疼痛、发红，看不清东西
我的眼睛突然疼痛、发红，看不清东西
我眼睛没有干涩

#医生问题#
你现在眼睛感觉怎么样
response: nMessage(content='我现在眼睛还是疼痛、发红，看东西仍然不清楚。'



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我的眼睛突然疼痛、发红，看不清东西
我的眼睛突然疼痛、发红，看不清东西
我眼睛没有干涩

#医生问题#
你现在眼睛感觉怎么样

**************FINISHED*****************



student_id : 12356 output I have a triangular thing on my eye
有重复
autoplay
student_id : 12356 output I don’t want to answer questions that have nothing to do with eye disease right now.
未找到文件名为 I don’t want to answer questions that have nothing.mp3 的MP3文件。
无重复
autoplay
student_id : 12356 output I am married
未找到文件名为 I am married.mp3 的MP3文件。
无重复
autoplay
student_id : 12356 output I am married
有重复
autoplay
student_id : 12356 output I am married
有重复
autoplay
time pass: 364 <class 'int'>
student_id : 12356 output my head doesn't hurt
未找到文件名为 my head doesn't hurt.mp3 的MP3文件。
无重复
autoplay
student_id : 12356 output I have never been to the hospital or used eye drops.
未找到文件名为 I have never been to the hospital or used eye drop.mp3 的MP3文件。
无重复
autoplay
student_id : 12356 output I have never been to the hospital or used eye drops.
有重复
autoplay
student_id : 12356 output I don't have diabetes
未找到文件名为 I don't have diabetes.mp3 的MP3文件。
无重复
autoplay
time pass: 772 <class 'int'>
student_id : 12356 output I don't have diabetes
有重复
autoplay
student_id : 12356 output I'm worried about my eye disease now. Please stop chatting.
未找到文件名为 I'm worried about my eye disease now. Please stop .mp3 的MP3文件。
无重复
autoplay
student_id : 12356 output This problem has nothing to do with my eye disease, right?
未找到文件名为 This problem has nothing to do with my eye disease.mp3 的MP3文件。
无重复
autoplay
student_id : 12356 output I don't want to answer this question because it doesn't seem to have anything to do with my eye disease.
未找到文件名为 I don't want to answer this question because it do.mp3 的MP3文件。
无重复
autoplay
student_id : 12356 output My name is Chen Moumou
有重复
autoplay
student_id : 12356 output I am male
未找到文件名为 I am male.mp3 的MP3文件。
无重复
autoplay
student_id : 12356 output I have no drug allergies
未找到文件名为 I have no drug allergies.mp3 的MP3文件。
无重复
autoplay
student_id : 12356 output I have no drug allergies
有重复
autoplay
student_id : 12356 output No food allergies
未找到文件名为 No food allergies.mp3 的MP3文件。
无重复
autoplay
time pass: 987 <class 'int'>
student_id : uiui output Feng Moumou
未找到文件名为 Feng Moumou.mp3 的MP3文件。
无重复
autoplay
student_id : uiui output I am from Guangzhou, Guangdong
未找到文件名为 I am from Guangzhou, Guangdong.mp3 的MP3文件。
无重复
autoplay
time pass: 366 <class 'int'>
student_id : 123 output It's my left eye that feels uncomfortable
未找到文件名为 It's my left eye that feels uncomfortable.mp3 的MP3文件。
无重复
autoplay
student_id : 123 output It's my left eye that feels uncomfortable
有重复
autoplay
student_id : 123 output It's my left eye that feels uncomfortable
有重复
autoplay
student_id : 123 output It's my left eye that feels uncomfortable
有重复
autoplay
student_id : 123 output My eyes suddenly hurt and became red, and I couldn't see clearly
未找到文件名为 My eyes suddenly hurt and became red, and I couldn.mp3 的MP3文件。
无重复
autoplay
time pass: 332 <class 'int'>
student_id : 123 output I have no drug allergies
有重复
autoplay
student_id : 123 output I have no drug allergies
有重复
autoplay
student_id : 123 output No food allergies
有重复
autoplay
student_id : hgjg output My eyes suddenly hurt and became red, and I couldn't see clearly
有重复
autoplay
student_id : hgjg output nMessage(content='I don't know.'
未找到文件名为 nMessage(content='I don't know.'.mp3 的MP3文件。
无重复
autoplay
student_id : hgjg output What exactly are you asking about? Can you be a little more detailed?
未找到文件名为 What exactly are you asking about? Can you be a li.mp3 的MP3文件。
无重复
autoplay
student_id : hgjg output nMessage(content='I don't know.'
有重复
autoplay
student_id : hgjg output nMessage(content='I don't know.'
有重复
autoplay
student_id : hgjg output Can I ask for more details? specifically is?
未找到文件名为 Can I ask for more details? specifically is?.mp3 的MP3文件。
无重复
autoplay
student_id : hgjg output nMessage(content='This started yesterday.'
未找到文件名为 nMessage(content='This started yesterday.'.mp3 的MP3文件。
无重复
autoplay
student_id : hgjg output Can you ask more carefully? Specifically?
未找到文件名为 Can you ask more carefully? Specifically?.mp3 的MP3文件。
无重复
autoplay
time pass: 303 <class 'int'>
student_id : hgjg output nMessage(content='My eyes are still painful and red, and I still can't see clearly.'
未找到文件名为 nMessage(content='My eyes are still painful and re.mp3 的MP3文件。
无重复
autoplay
  Stopping...
 * Serving Flask app 'CHATZOC_glm4_jump_api'
 * Debug mode: off
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5008
 * Running on http://172.21.46.28:5008
[33mPress CTRL+C to quit[0m
127.0.0.1 - - [12/Jun/2024 23:21:50] "POST / HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 23:24:43] "POST / HTTP/1.1" 200 -
127.0.0.1 - - [12/Jun/2024 23:25:22] "POST / HTTP/1.1" 200 -

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://172.21.46.28:8501
  External URL: http://198.11.181.34:8501

 * Serving Flask app 'teaching_api'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8891
[33mPress CTRL+C to quit[0m
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
127.0.0.1 - - [13/Jun/2024 09:37:50] "POST /load HTTP/1.1" 200 -
/root/miniconda3/envs/embedding/lib/python3.10/site-packages/pydub/utils.py:170: RuntimeWarning: Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work
  warn("Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work", RuntimeWarning)
127.0.0.1 - - [13/Jun/2024 09:38:12] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [13/Jun/2024 09:38:53] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [13/Jun/2024 09:38:55] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [13/Jun/2024 09:39:35] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [13/Jun/2024 09:39:36] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [13/Jun/2024 09:39:51] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [13/Jun/2024 09:39:52] "POST /chat HTTP/1.1" 200 -
 * Detected change in '/home/to_NM/demo_NM/teaching_api.py', reloading
 * Detected change in '/home/to_NM/demo_NM/teaching_api.py', reloading
 * Detected change in '/home/to_NM/demo_NM/teaching_api.py', reloading
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
------------ chatZOC api called -------------------------

student_id: afaf user input: 你的名字
----------------ChatZOC database log ----------------

distsnce: [0.24164295196533203, 0.2790876030921936, 0.3054617941379547] 

知识库所有match: ['您的姓名是？', '您叫什么名字？', '您的名字是什么？']


知识库选择: 柳某
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: afaf user input: 你的名字
----------------ChatZOC database log ----------------

distsnce: [0.24164295196533203, 0.2790876030921936, 0.3054617941379547] 

知识库所有match: ['您的姓名是？', '您叫什么名字？', '您的名字是什么？']


知识库选择: 柳某
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: afaf user input: 你的年龄
----------------ChatZOC database log ----------------

distsnce: [0.2574726641178131, 0.3139134645462036, 0.3645883798599243] 

知识库所有match: ['您的年龄是多少岁？', '你今年是多少岁？', '您今年多大岁数？']


知识库选择: 我今年74岁
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: afaf user input: 你的年龄
----------------ChatZOC database log ----------------

distsnce: [0.2574726641178131, 0.3139134645462036, 0.3645883798599243] 

知识库所有match: ['您的年龄是多少岁？', '你今年是多少岁？', '您今年多大岁数？']


知识库选择: 我今年74岁
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: afaf user input: 你结婚了吗
----------------ChatZOC database log ----------------

distsnce: [0.02727178856730461, 0.0709637925028801, 0.13278116285800934] 

知识库所有match: ['您结婚了吗？', '您是否结婚了？', '您是否已婚？']


知识库选择: 我已经结婚了
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: afaf user input: 你结婚了吗
----------------ChatZOC database log ----------------

distsnce: [0.02727178856730461, 0.0709637925028801, 0.13278116285800934] 

知识库所有match: ['您结婚了吗？', '您是否结婚了？', '您是否已婚？']


知识库选择: 我已经结婚了
----------------ChatZOC database log over ----------------
------------ chatZOC api called -------------------------

student_id: afaf user input: 你有小孩吗
----------------ChatZOC database log ----------------

distsnce: [0.022485392168164253, 0.06812785565853119, 0.10941803455352783] 

知识库所有match: ['你有小孩吗？', '您有孩子吗？', '您是否有孩子？']


知识库选择: 有1个儿子，1个女儿
----------------ChatZOC database log over ----------------
terminate called without an active exception
2024-06-13 09:41:08.439 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connectionpool.py", line 793, in urlopen
    response = self._make_request(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connectionpool.py", line 537, in _make_request
    response = conn.getresponse()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connection.py", line 466, in getresponse
    httplib_response = super().getresponse()
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 1375, in getresponse
    response.begin()
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 318, in begin
    version, status, reason = self._read_status()
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 287, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connectionpool.py", line 847, in urlopen
    retries = retries.increment(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/util/retry.py", line 470, in increment
    raise reraise(type(error), error, _stacktrace)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/util/util.py", line 38, in reraise
    raise value.with_traceback(tb)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connectionpool.py", line 793, in urlopen
    response = self._make_request(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connectionpool.py", line 537, in _make_request
    response = conn.getresponse()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connection.py", line 466, in getresponse
    httplib_response = super().getresponse()
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 1375, in getresponse
    response.begin()
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 318, in begin
    version, status, reason = self._read_status()
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 287, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
urllib3.exceptions.ProtocolError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/SP_choose.py", line 85, in <module>
    state_goal = requests.post('http://127.0.0.1:8891/load', headers={'Content-Type': 'application/json'}, json= {"load": [{"model": option+'.json'}]})
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/adapters.py", line 682, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2024-06-13 09:41:36.457 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connectionpool.py", line 793, in urlopen
    response = self._make_request(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connectionpool.py", line 496, in _make_request
    conn.request(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connection.py", line 400, in request
    self.endheaders()
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 1278, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 1038, in _send_output
    self.send(msg)
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 976, in send
    self.connect()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connection.py", line 238, in connect
    self.sock = self._new_conn()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f4452b395a0>: Failed to establish a new connection: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connectionpool.py", line 847, in urlopen
    retries = retries.increment(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/util/retry.py", line 515, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8891): Max retries exceeded with url: /load (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f4452b395a0>: Failed to establish a new connection: [Errno 111] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/SP_choose.py", line 85, in <module>
    state_goal = requests.post('http://127.0.0.1:8891/load', headers={'Content-Type': 'application/json'}, json= {"load": [{"model": option+'.json'}]})
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8891): Max retries exceeded with url: /load (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f4452b395a0>: Failed to establish a new connection: [Errno 111] Connection refused'))
2024-06-13 09:41:42.907 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connectionpool.py", line 793, in urlopen
    response = self._make_request(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connectionpool.py", line 496, in _make_request
    conn.request(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connection.py", line 400, in request
    self.endheaders()
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 1278, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 1038, in _send_output
    self.send(msg)
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 976, in send
    self.connect()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connection.py", line 238, in connect
    self.sock = self._new_conn()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f4452b3a3e0>: Failed to establish a new connection: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connectionpool.py", line 847, in urlopen
    retries = retries.increment(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/util/retry.py", line 515, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8891): Max retries exceeded with url: /load (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f4452b3a3e0>: Failed to establish a new connection: [Errno 111] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/SP_choose.py", line 85, in <module>
    state_goal = requests.post('http://127.0.0.1:8891/load', headers={'Content-Type': 'application/json'}, json= {"load": [{"model": option+'.json'}]})
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8891): Max retries exceeded with url: /load (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f4452b3a3e0>: Failed to establish a new connection: [Errno 111] Connection refused'))
 * Serving Flask app 'teaching_api'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8891
[33mPress CTRL+C to quit[0m
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
../knowledge_base_new/modified_8_麦粒肿_1.json
成功创建知识库
127.0.0.1 - - [13/Jun/2024 09:43:30] "POST /load HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 13515 user input: 你的名字
----------------ChatZOC database log ----------------

distsnce: [0.24164295196533203, 0.2790876030921936, 0.3054617941379547] 

知识库所有match: ['您的姓名是？', '您叫什么名字？', '您的名字是什么？']


知识库选择: 冯某某    
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:43:41] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 13515 user input: 你的名字
----------------ChatZOC database log ----------------

distsnce: [0.24164295196533203, 0.2790876030921936, 0.3054617941379547] 

知识库所有match: ['您的姓名是？', '您叫什么名字？', '您的名字是什么？']


知识库选择: 冯某某    
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:44:28] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 13515 user input: 你的眼睛怎么不舒服
----------------ChatZOC database log ----------------

distsnce: [0.13003182411193848, 0.14732475578784943, 0.1560942679643631] 

知识库所有match: ['你的眼睛为什么不舒服？', '你眼睛哪里不舒服？', '您眼睛有什么不舒服？']


知识库选择: 我平时工作的时候会化妆，但我晚上都会卸妆的，不知道跟这个有没有关系
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:44:29] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 13515 user input: 你的眼睛怎么不舒服
----------------ChatZOC database log ----------------

distsnce: [0.13003182411193848, 0.14732475578784943, 0.1560942679643631] 

知识库所有match: ['你的眼睛为什么不舒服？', '你眼睛哪里不舒服？', '您眼睛有什么不舒服？']


知识库选择: 我平时工作的时候会化妆，但我晚上都会卸妆的，不知道跟这个有没有关系
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:44:52] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 13515 user input: 你的眼睛有什么问题
----------------ChatZOC database log ----------------

distsnce: [0.1880321502685547, 0.23908746242523193, 0.339290052652359] 

知识库所有match: ['你哪只眼睛出问题了？', '您眼睛出现了什么样的问题或症状？', '你眼睛怎么回事？']


知识库选择: 是左眼
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:44:55] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 13515 user input: 你的眼睛有什么问题
----------------ChatZOC database log ----------------

distsnce: [0.1880321502685547, 0.23908746242523193, 0.339290052652359] 

知识库所有match: ['你哪只眼睛出问题了？', '您眼睛出现了什么样的问题或症状？', '你眼睛怎么回事？']


知识库选择: 是左眼
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:45:15] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 13515 user input: 你的左眼具体是什么症状
----------------ChatZOC database log ----------------

distsnce: [0.27384692430496216, 0.28202110528945923, 0.41936492919921875] 

知识库所有match: ['您眼睛出现了什么样的问题或症状？', '您眼睛出现了什么症状或不适？', '你的眼睛在这之前有什么疾病吗？']


知识库选择: 我的眼皮肿了，压一下还会痛
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:45:16] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 13515 user input: 你的左眼具体是什么症状
----------------ChatZOC database log ----------------

distsnce: [0.27384692430496216, 0.28202110528945923, 0.41936492919921875] 

知识库所有match: ['您眼睛出现了什么样的问题或症状？', '您眼睛出现了什么症状或不适？', '你的眼睛在这之前有什么疾病吗？']


知识库选择: 我的眼皮肿了，压一下还会痛
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:45:28] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 13515 user input: 你的电话
----------------ChatZOC database log ----------------

distsnce: [0.41925787925720215, 0.435894638299942, 0.48552608489990234] 

知识库所有match: ['你的电话是多少？', '您电话的号码是？', '您的联系电话是什么？']


知识库选择: 这是我的隐私
这是我的隐私
这是我的隐私
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
这是我的隐私
这是我的隐私
这是我的隐私

#医生问题#
你的电话
response: 我不知道。



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
这是我的隐私
这是我的隐私
这是我的隐私

#医生问题#
你的电话

**************FINISHED*****************



127.0.0.1 - - [13/Jun/2024 09:45:29] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 13515 user input: 你的电话
----------------ChatZOC database log ----------------

distsnce: [0.41925787925720215, 0.435894638299942, 0.48552608489990234] 

知识库所有match: ['你的电话是多少？', '您电话的号码是？', '您的联系电话是什么？']


知识库选择: 这是我的隐私
这是我的隐私
这是我的隐私
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
这是我的隐私
这是我的隐私
这是我的隐私

#医生问题#
你的电话
response: 我不知道。



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
这是我的隐私
这是我的隐私
这是我的隐私

#医生问题#
你的电话

**************FINISHED*****************



127.0.0.1 - - [13/Jun/2024 09:45:40] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 13515 user input: 你的电话号码是多少
----------------ChatZOC database log ----------------

distsnce: [0.06994607299566269, 0.13249939680099487, 0.2642551064491272] 

知识库所有match: ['您的电话号码是多少？', '你的电话是多少？', '您电话的号码是？']


知识库选择: 这是我的隐私
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:45:41] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 13515 user input: 你的电话号码是多少
----------------ChatZOC database log ----------------

distsnce: [0.06994607299566269, 0.13249939680099487, 0.2642551064491272] 

知识库所有match: ['您的电话号码是多少？', '你的电话是多少？', '您电话的号码是？']


知识库选择: 这是我的隐私
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:45:55] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 13515 user input: 你之前去看过病吗
----------------ChatZOC database log ----------------

distsnce: [0.40874674916267395, 0.4475240409374237, 0.5149822235107422] 

知识库所有match: ['有没有去看过病？', '在发病后您是否就医过？', '你之前有去别的地方看过吗？']


知识库选择: 我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了

#医生问题#
你之前去看过病吗
response: 我没有去看过病。



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了

#医生问题#
你之前去看过病吗

**************FINISHED*****************



127.0.0.1 - - [13/Jun/2024 09:45:56] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 13515 user input: 你之前去看过病吗
----------------ChatZOC database log ----------------

distsnce: [0.40874674916267395, 0.4475240409374237, 0.5149822235107422] 

知识库所有match: ['有没有去看过病？', '在发病后您是否就医过？', '你之前有去别的地方看过吗？']


知识库选择: 我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了

#医生问题#
你之前去看过病吗
response: 我没有去看过病。



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了

#医生问题#
你之前去看过病吗

**************FINISHED*****************



127.0.0.1 - - [13/Jun/2024 09:46:06] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 13515 user input: 你的名字是
----------------ChatZOC database log ----------------

distsnce: [0.21961066126823425, 0.321754515171051, 0.3251340985298157] 

知识库所有match: ['您的姓名是？', '您叫什么名字？', '您的名字是什么？']


知识库选择: 冯某某    
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:46:08] "POST /chat HTTP/1.1" 200 -
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
127.0.0.1 - - [13/Jun/2024 09:50:44] "POST /load HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: klk user input: 你的名字是
----------------ChatZOC database log ----------------

distsnce: [0.21961066126823425, 0.321754515171051, 0.3251340985298157] 

知识库所有match: ['您的姓名是？', '您叫什么名字？', '您的名字是什么？']


知识库选择: 我的名字是柳某
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:50:50] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: klk user input: 你的名字是
----------------ChatZOC database log ----------------

distsnce: [0.21961066126823425, 0.321754515171051, 0.3251340985298157] 

知识库所有match: ['您的姓名是？', '您叫什么名字？', '您的名字是什么？']


知识库选择: 我的名字是柳某
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:51:09] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: klk user input: 你的名字是
----------------ChatZOC database log ----------------

distsnce: [0.21961066126823425, 0.321754515171051, 0.3251340985298157] 

知识库所有match: ['您的姓名是？', '您叫什么名字？', '您的名字是什么？']


知识库选择: 我的名字是柳某
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:51:10] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: klk user input: 你的名字是
----------------ChatZOC database log ----------------

distsnce: [0.21961066126823425, 0.321754515171051, 0.3251340985298157] 

知识库所有match: ['您的姓名是？', '您叫什么名字？', '您的名字是什么？']


知识库选择: 我的名字是柳某
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:51:19] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: klk user input: 你多大了
----------------ChatZOC database log ----------------

distsnce: [0.4909684658050537, 0.678921639919281, 0.7321711182594299] 

知识库所有match: ['请问您多大了？', '您目前几岁了？', '您今年多大岁数？']


知识库选择: 我今年74岁
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我今年74岁

#医生问题#
你多大了
response: 我今年74岁。



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我今年74岁

#医生问题#
你多大了

**************FINISHED*****************



127.0.0.1 - - [13/Jun/2024 09:51:20] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: klk user input: 你多大了
----------------ChatZOC database log ----------------

distsnce: [0.4909684658050537, 0.678921639919281, 0.7321711182594299] 

知识库所有match: ['请问您多大了？', '您目前几岁了？', '您今年多大岁数？']


知识库选择: 我今年74岁
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我今年74岁

#医生问题#
你多大了
response: 我今年74岁。



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我今年74岁

#医生问题#
你多大了

**************FINISHED*****************



127.0.0.1 - - [13/Jun/2024 09:51:27] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: klk user input: 你的名字是
----------------ChatZOC database log ----------------

distsnce: [0.21961066126823425, 0.321754515171051, 0.3251340985298157] 

知识库所有match: ['您的姓名是？', '您叫什么名字？', '您的名字是什么？']


知识库选择: 我的名字是柳某
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:51:29] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: klk user input: 你的名字是
----------------ChatZOC database log ----------------

distsnce: [0.21961066126823425, 0.321754515171051, 0.3251340985298157] 

知识库所有match: ['您的姓名是？', '您叫什么名字？', '您的名字是什么？']


知识库选择: 我的名字是柳某
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:52:00] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: klk user input: 你有结婚吗
----------------ChatZOC database log ----------------

distsnce: [0.07236547768115997, 0.07682030647993088, 0.1223241537809372] 

知识库所有match: ['您是否结婚了？', '您结婚了吗？', '您是否已婚？']


知识库选择: 我已经结婚了
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:52:01] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: klk user input: 你有结婚吗
----------------ChatZOC database log ----------------

distsnce: [0.07236547768115997, 0.07682030647993088, 0.1223241537809372] 

知识库所有match: ['您是否结婚了？', '您结婚了吗？', '您是否已婚？']


知识库选择: 我已经结婚了
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:52:17] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: klk user input: 你的眼睛怎么了
----------------ChatZOC database log ----------------

distsnce: [0.19509637355804443, 0.2064376175403595, 0.3570922017097473] 

知识库所有match: ['你眼睛怎么回事？', '眼睛怎么了？', '你的眼睛干吗？']


知识库选择: 我的眼睛突然疼痛、发红，看不清东西
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:52:18] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: klk user input: 你的眼睛怎么了
----------------ChatZOC database log ----------------

distsnce: [0.19509637355804443, 0.2064376175403595, 0.3570922017097473] 

知识库所有match: ['你眼睛怎么回事？', '眼睛怎么了？', '你的眼睛干吗？']


知识库选择: 我的眼睛突然疼痛、发红，看不清东西
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:52:37] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: klk user input: 你有食物过敏啊
----------------ChatZOC database log ----------------

distsnce: [0.24028059840202332, 0.2554531693458557, 0.28777197003364563] 

知识库所有match: ['你之前有没有食物过敏？', '您之前是否有食物过敏的情况？', '您是否曾经出现过食物过敏？']


知识库选择: 没有食物过敏
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:52:39] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: klk user input: 你有食物过敏啊
----------------ChatZOC database log ----------------

distsnce: [0.24028059840202332, 0.2554531693458557, 0.28777197003364563] 

知识库所有match: ['你之前有没有食物过敏？', '您之前是否有食物过敏的情况？', '您是否曾经出现过食物过敏？']


知识库选择: 没有食物过敏
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:52:49] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: klk user input: 有药物过敏吗
----------------ChatZOC database log ----------------

distsnce: [0.19547857344150543, 0.24875123798847198, 0.26572519540786743] 

知识库所有match: ['有对什么药物过敏吗？', '您之前是否有药物过敏的情况？', '您是否曾经出现过药物过敏？']


知识库选择: 我没有药物过敏
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:52:50] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: klk user input: 有药物过敏吗
----------------ChatZOC database log ----------------

distsnce: [0.19547857344150543, 0.24875123798847198, 0.26572519540786743] 

知识库所有match: ['有对什么药物过敏吗？', '您之前是否有药物过敏的情况？', '您是否曾经出现过药物过敏？']


知识库选择: 我没有药物过敏
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 09:52:56] "POST /chat HTTP/1.1" 200 -
../knowledge_base_new/modified_8_麦粒肿_1.json
成功创建知识库
127.0.0.1 - - [13/Jun/2024 10:14:23] "POST /load HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 123 user input: 你的眼睛疼吗
----------------ChatZOC database log ----------------

distsnce: [0.18976473808288574, 0.19895216822624207, 0.2455819994211197] 

知识库所有match: ['您是否感到眼睛疼痛？', '眼睛痛吗？', '你的眼睛痒吗？']


知识库选择: 会的，碰一下红肿的地方会痛
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 10:14:38] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 123 user input: 你的眼睛疼吗
----------------ChatZOC database log ----------------

distsnce: [0.18976473808288574, 0.19895216822624207, 0.2455819994211197] 

知识库所有match: ['您是否感到眼睛疼痛？', '眼睛痛吗？', '你的眼睛痒吗？']


知识库选择: 会的，碰一下红肿的地方会痛
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 10:15:00] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 123 user input: 你的眼睛疼吗
----------------ChatZOC database log ----------------

distsnce: [0.18976473808288574, 0.19895216822624207, 0.2455819994211197] 

知识库所有match: ['您是否感到眼睛疼痛？', '眼睛痛吗？', '你的眼睛痒吗？']


知识库选择: 会的，碰一下红肿的地方会痛
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 10:15:02] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 123 user input: 你的眼睛疼吗
----------------ChatZOC database log ----------------

distsnce: [0.18976473808288574, 0.19895216822624207, 0.2455819994211197] 

知识库所有match: ['您是否感到眼睛疼痛？', '眼睛痛吗？', '你的眼睛痒吗？']


知识库选择: 会的，碰一下红肿的地方会痛
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 10:15:19] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 123 user input: 你的眼睛痛吗
----------------ChatZOC database log ----------------

distsnce: [0.14366698265075684, 0.14766256511211395, 0.2099943906068802] 

知识库所有match: ['您是否感到眼睛疼痛？', '眼睛痛吗？', '是否有眼部疼痛？']


知识库选择: 会的，碰一下红肿的地方会痛
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 10:15:21] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 123 user input: 你的眼睛痛吗
----------------ChatZOC database log ----------------

distsnce: [0.14366698265075684, 0.14766256511211395, 0.2099943906068802] 

知识库所有match: ['您是否感到眼睛疼痛？', '眼睛痛吗？', '是否有眼部疼痛？']


知识库选择: 会的，碰一下红肿的地方会痛
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 10:15:47] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 123 user input: 你是谁
----------------ChatZOC database log ----------------

distsnce: [0.3074830174446106, 0.4968374967575073, 0.5782204270362854] 

知识库所有match: ['您是哪里人？', '您是哪个地方的人？', '您的名字是什么？']


知识库选择: 我是广东广州人
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 10:15:48] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 123 user input: 你是谁
----------------ChatZOC database log ----------------

distsnce: [0.3074830174446106, 0.4968374967575073, 0.5782204270362854] 

知识库所有match: ['您是哪里人？', '您是哪个地方的人？', '您的名字是什么？']


知识库选择: 我是广东广州人
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 10:16:01] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 123 user input: 你叫什么名字
----------------ChatZOC database log ----------------

distsnce: [0.04317820817232132, 0.16676577925682068, 0.24755516648292542] 

知识库所有match: ['您叫什么名字？', '您的名字是什么？', '您叫什么？']


知识库选择: 我的姓名是冯某某
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 10:16:03] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 123 user input: 你叫什么名字
----------------ChatZOC database log ----------------

distsnce: [0.04317820817232132, 0.16676577925682068, 0.24755516648292542] 

知识库所有match: ['您叫什么名字？', '您的名字是什么？', '您叫什么？']


知识库选择: 我的姓名是冯某某
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 10:16:36] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 123 user input: 你叫什么名字
----------------ChatZOC database log ----------------

distsnce: [0.04317820817232132, 0.16676577925682068, 0.24755516648292542] 

知识库所有match: ['您叫什么名字？', '您的名字是什么？', '您叫什么？']


知识库选择: 我的姓名是冯某某
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 10:16:38] "POST /chat HTTP/1.1" 200 -
 * Detected change in '/home/to_NM/demo_NM/teaching_api.py', reloading
terminate called without an active exception
2024-06-13 11:15:28.507 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connectionpool.py", line 793, in urlopen
    response = self._make_request(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connectionpool.py", line 537, in _make_request
    response = conn.getresponse()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connection.py", line 466, in getresponse
    httplib_response = super().getresponse()
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 1375, in getresponse
    response.begin()
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 318, in begin
    version, status, reason = self._read_status()
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 287, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connectionpool.py", line 847, in urlopen
    retries = retries.increment(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/util/retry.py", line 470, in increment
    raise reraise(type(error), error, _stacktrace)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/util/util.py", line 38, in reraise
    raise value.with_traceback(tb)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connectionpool.py", line 793, in urlopen
    response = self._make_request(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connectionpool.py", line 537, in _make_request
    response = conn.getresponse()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connection.py", line 466, in getresponse
    httplib_response = super().getresponse()
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 1375, in getresponse
    response.begin()
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 318, in begin
    version, status, reason = self._read_status()
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 287, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
urllib3.exceptions.ProtocolError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/SP_choose.py", line 85, in <module>
    state_goal = requests.post('http://127.0.0.1:8891/load', headers={'Content-Type': 'application/json'}, json= {"load": [{"model": option+'.json'}]})
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/adapters.py", line 682, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2024-06-13 11:15:45.323 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connectionpool.py", line 793, in urlopen
    response = self._make_request(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connectionpool.py", line 496, in _make_request
    conn.request(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connection.py", line 400, in request
    self.endheaders()
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 1278, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 1038, in _send_output
    self.send(msg)
  File "/root/miniconda3/envs/embedding/lib/python3.10/http/client.py", line 976, in send
    self.connect()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connection.py", line 238, in connect
    self.sock = self._new_conn()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f4439cc3520>: Failed to establish a new connection: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/connectionpool.py", line 847, in urlopen
    retries = retries.increment(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/urllib3/util/retry.py", line 515, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8891): Max retries exceeded with url: /load (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f4439cc3520>: Failed to establish a new connection: [Errno 111] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/SP_choose.py", line 85, in <module>
    state_goal = requests.post('http://127.0.0.1:8891/load', headers={'Content-Type': 'application/json'}, json= {"load": [{"model": option+'.json'}]})
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8891): Max retries exceeded with url: /load (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f4439cc3520>: Failed to establish a new connection: [Errno 111] Connection refused'))
 * Serving Flask app 'teaching_api'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8891
[33mPress CTRL+C to quit[0m
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
127.0.0.1 - - [13/Jun/2024 15:13:29] "POST /load HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你叫什么名字
----------------ChatZOC database log ----------------

distsnce: [0.04317820817232132, 0.16676577925682068, 0.24755516648292542] 

知识库所有match: ['您叫什么名字？', '您的名字是什么？', '您叫什么？']


知识库选择: 柳某
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:13:43] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你叫什么名字
----------------ChatZOC database log ----------------

distsnce: [0.04317820817232132, 0.16676577925682068, 0.24755516648292542] 

知识库所有match: ['您叫什么名字？', '您的名字是什么？', '您叫什么？']


知识库选择: 柳某
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:13:52] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你是哪里人
----------------ChatZOC database log ----------------

distsnce: [0.06157069653272629, 0.1770167350769043, 0.33727866411209106] 

知识库所有match: ['您是哪里人？', '您是哪个地方的人？', '您来自哪里？']


知识库选择: 我是广东人
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:13:54] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你是哪里人
----------------ChatZOC database log ----------------

distsnce: [0.06157069653272629, 0.1770167350769043, 0.33727866411209106] 

知识库所有match: ['您是哪里人？', '您是哪个地方的人？', '您来自哪里？']


知识库选择: 我是广东人
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:14:09] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你哪里不舒服
----------------ChatZOC database log ----------------

distsnce: [0.339535653591156, 0.4271683096885681, 0.49876683950424194] 

知识库所有match: ['您怎么不舒服？', '其他还有哪里不舒服吗', '请问你有什么不舒服？']


知识库选择: 我的眼睛突然疼痛、发红，看不清东西
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:14:11] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你哪里不舒服
----------------ChatZOC database log ----------------

distsnce: [0.339535653591156, 0.4271683096885681, 0.49876683950424194] 

知识库所有match: ['您怎么不舒服？', '其他还有哪里不舒服吗', '请问你有什么不舒服？']


知识库选择: 我的眼睛突然疼痛、发红，看不清东西
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:14:26] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 哪只眼睛？
----------------ChatZOC database log ----------------

distsnce: [0.02595514804124832, 0.11448995769023895, 0.23019298911094666] 

知识库所有match: ['是哪只眼睛？', '哪边的眼睛？', '是哪只眼睛看不清？']


知识库选择: 是左眼不舒服
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:14:27] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 哪只眼睛？
----------------ChatZOC database log ----------------

distsnce: [0.02595514804124832, 0.11448995769023895, 0.23019298911094666] 

知识库所有match: ['是哪只眼睛？', '哪边的眼睛？', '是哪只眼睛看不清？']


知识库选择: 是左眼不舒服
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:14:52] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你去医院了吗？
----------------ChatZOC database log ----------------

distsnce: [0.2774636745452881, 0.3114921450614929, 0.4103359878063202] 

知识库所有match: ['您之前有去别的医院就诊吗？', '有去医院看吗？', '在发病后您是否就医过？']


知识库选择: 我没有去医院看过，也没有用过眼药水
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:14:53] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你去医院了吗？
----------------ChatZOC database log ----------------

distsnce: [0.2774636745452881, 0.3114921450614929, 0.4103359878063202] 

知识库所有match: ['您之前有去别的医院就诊吗？', '有去医院看吗？', '在发病后您是否就医过？']


知识库选择: 我没有去医院看过，也没有用过眼药水
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:15:20] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你对什么过敏吗？
----------------ChatZOC database log ----------------

distsnce: [0.3119564652442932, 0.3222149610519409, 0.32271239161491394] 

知识库所有match: ['有对什么药物过敏吗？', '有对什么食物过敏吗？', '您之前是否有药物过敏的情况？']


知识库选择: 我没有药物过敏
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:15:21] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你对什么过敏吗？
----------------ChatZOC database log ----------------

distsnce: [0.3119564652442932, 0.3222149610519409, 0.32271239161491394] 

知识库所有match: ['有对什么药物过敏吗？', '有对什么食物过敏吗？', '您之前是否有药物过敏的情况？']


知识库选择: 我没有药物过敏
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:15:43] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你对什么过敏吗？
----------------ChatZOC database log ----------------

distsnce: [0.3119564652442932, 0.3222149610519409, 0.32271239161491394] 

知识库所有match: ['有对什么药物过敏吗？', '有对什么食物过敏吗？', '您之前是否有药物过敏的情况？']


知识库选择: 我没有药物过敏
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:15:44] "POST /chat HTTP/1.1" 200 -
student_id : afaf output <!doctype html>
<html lang=en>
<title>500 Internal Server Error</title>
<h1>Internal Server Error</h1>
<p>The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.</p>
未找到文件名为 <!doctype html>
<html lang=en>
<title>500 Internal.mp3 的MP3文件。
无重复
student_id : afaf output nMessage(content='My name is Liu.\n\nOr if you need synonymous paraphrasing, you can say:\n\nMy name is Liu.'
未找到文件名为 nMessage(content='My name is Liu.\n\nOr if you nee.mp3 的MP3文件。
无重复
student_id : afaf output nMessage(content='I am seventy-four this year.'
未找到文件名为 nMessage(content='I am seventy-four this year.'.mp3 的MP3文件。
无重复
student_id : afaf output nMessage(content='I am 74 this year.'
未找到文件名为 nMessage(content='I am 74 this year.'.mp3 的MP3文件。
无重复
student_id : afaf output nMessage(content='I have entered the marriage hall.'
未找到文件名为 nMessage(content='I have entered the marriage hall.mp3 的MP3文件。
无重复
student_id : afaf output nMessage(content='I have entered the marriage hall.'
有重复
student_id : afaf output nMessage(content='I have a son and a daughter.'
未找到文件名为 nMessage(content='I have a son and a daughter.'.mp3 的MP3文件。
无重复
student_id : 13515 output My name is Feng Moumou. \n\nOr\n\nMy name is Feng Moumou.
未找到文件名为 My name is Feng Moumou. \n\nOr\n\nMy name is Feng .mp3 的MP3文件。
无重复
student_id : 13515 output My name is Feng Moumou. \n\nOr\n\nMy name is Feng Moumou.
有重复
student_id : 13515 output I need to wear makeup for my daily work, but I remove it completely every night. I don’t know if this has something to do with my eye discomfort.
未找到文件名为 I need to wear makeup for my daily work, but I rem.mp3 的MP3文件。
无重复
student_id : 13515 output I usually wear makeup to go to work, but I have the habit of removing it at night. I’m not sure if this is related to my eye discomfort.
未找到文件名为 I usually wear makeup to go to work, but I have th.mp3 的MP3文件。
无重复
student_id : 13515 output My left eye feels uncomfortable.
未找到文件名为 My left eye feels uncomfortable..mp3 的MP3文件。
无重复
student_id : 13515 output My left eye feels uncomfortable.
有重复
student_id : 13515 output My left eyelid is swollen and painful when pressed.
未找到文件名为 My left eyelid is swollen and painful when pressed.mp3 的MP3文件。
无重复
student_id : 13515 output My left eyelid is swollen and painful when pressed.
有重复
student_id : 13515 output I have no idea.
有重复
student_id : 13515 output I have no idea.
有重复
student_id : 13515 output This is my private information.
未找到文件名为 This is my private information..mp3 的MP3文件。
无重复
student_id : 13515 output This is my private information.
有重复
student_id : 13515 output I haven't been to a doctor.
未找到文件名为 I haven't been to a doctor..mp3 的MP3文件。
无重复
student_id : 13515 output I haven't been to a doctor.
有重复
student_id : 13515 output My name is Feng Moumou. \n\nOr use the first person synonym:\n\nMy name is Feng Moumou.
未找到文件名为 My name is Feng Moumou. \n\nOr use the first perso.mp3 的MP3文件。
无重复
student_id : klk output My name is Liu. \n\nSynonymous paraphrase: My name is Liu.
未找到文件名为 My name is Liu. \n\nSynonymous paraphrase: My name.mp3 的MP3文件。
无重复
student_id : klk output My name is Liu. \n\nSynonymous paraphrase: My name is Liu.
有重复
student_id : klk output My name is Liu. \n\nSynonymous paraphrase: My name is Liu.
有重复
student_id : klk output My name is Liu. \n\nSynonymous paraphrase: My name is Liu.
有重复
student_id : klk output I am 74 years old.
有重复
student_id : klk output I am 74 years old.
有重复
student_id : klk output My name is Liu. \n\nSynonymous paraphrase: My name is Liu.
有重复
student_id : klk output My name is Liu. \n\nSynonymous paraphrase: My name is Liu.
有重复
student_id : klk output I am married and have a family.
未找到文件名为 I am married and have a family..mp3 的MP3文件。
无重复
student_id : klk output I am married and have a family.
有重复
student_id : klk output My eyes suddenly hurt, became red and swollen, and my vision became blurry.
未找到文件名为 My eyes suddenly hurt, became red and swollen, and.mp3 的MP3文件。
无重复
student_id : klk output My eyes suddenly hurt and became red and swollen, and my vision became blurry.
未找到文件名为 My eyes suddenly hurt and became red and swollen, .mp3 的MP3文件。
无重复
student_id : klk output I have no documented food allergies.
未找到文件名为 I have no documented food allergies..mp3 的MP3文件。
无重复
student_id : klk output I have no documented food allergies.
有重复
student_id : klk output I have no history of drug allergies.
未找到文件名为 I have no history of drug allergies..mp3 的MP3文件。
无重复
student_id : klk output I have no history of drug allergies.
有重复
student_id : 123 output Yes, it hurts when I touch those red and swollen areas.
未找到文件名为 Yes, it hurts when I touch those red and swollen a.mp3 的MP3文件。
无重复
student_id : 123 output Yes, I feel pain when I touch the red and swollen areas.
未找到文件名为 Yes, I feel pain when I touch the red and swollen .mp3 的MP3文件。
无重复
student_id : 123 output Yes, it hurts when I touch those red and swollen areas.
有重复
student_id : 123 output Yes, it hurts when I touch the red and swollen areas.
未找到文件名为 Yes, it hurts when I touch the red and swollen are.mp3 的MP3文件。
无重复
student_id : 123 output Yes, it hurts when I touch those red and swollen areas.
有重复
student_id : 123 output Yes, it hurts when I touch those red and swollen areas.
有重复
student_id : 123 output I'm from Guangzhou.
未找到文件名为 I'm from Guangzhou..mp3 的MP3文件。
无重复
student_id : 123 output I'm from Guangzhou.
有重复
student_id : 123 output My name is Feng Moumou. \n\nTo paraphrase synonymously, it can be: &quot;My name is Feng XX.&quot;
未找到文件名为 My name is Feng Moumou. \n\nTo paraphrase synonymo.mp3 的MP3文件。
无重复
student_id : 123 output My name is Feng Moumou. \n\nSynonymous paraphrase first person answer: My name is Feng Moumou.
未找到文件名为 My name is Feng Moumou. \n\nSynonymous paraphrase .mp3 的MP3文件。
无重复
student_id : 123 output My name is Feng Moumou. \n\nSynonymous paraphrase first person answer: My name is Feng Moumou.
有重复
student_id : 19111820 output My name is Liu
未找到文件名为 My name is Liu.mp3 的MP3文件。
无重复
student_id : 19111820 output My name is Liu
有重复
student_id : 19111820 output I'm from Guangdong.
未找到文件名为 I'm from Guangdong..mp3 的MP3文件。
无重复
student_id : 19111820 output I'm from Guangdong.
有重复
student_id : 19111820 output I suddenly felt pain and redness in my eyes, and my vision became blurry.
未找到文件名为 I suddenly felt pain and redness in my eyes, and m.mp3 的MP3文件。
无重复
student_id : 19111820 output I suddenly felt pain and redness in my eyes, and my vision became blurry.
有重复
student_id : 19111820 output My left eye feels uncomfortable.
有重复
student_id : 19111820 output My left eye feels uncomfortable.
有重复
student_id : 19111820 output I have not been to the hospital or used any eye drops.
未找到文件名为 I have not been to the hospital or used any eye dr.mp3 的MP3文件。
无重复
student_id : 19111820 output I have not been to the hospital or used any eye drops.
有重复
student_id : 19111820 output I have no history of any drug allergies.
未找到文件名为 I have no history of any drug allergies..mp3 的MP3文件。
无重复
student_id : 19111820 output I have no history of any drug allergies.
有重复
student_id : 19111820 output ../knowledge_base_new/modified_8_麦粒肿_1.json
成功创建知识库
127.0.0.1 - - [13/Jun/2024 15:18:38] "POST /load HTTP/1.1" 200 -
I have no history of any drug allergies.
有重复
  Stopping...

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://172.21.46.28:8501
  External URL: http://198.11.181.34:8501

 * Serving Flask app 'teaching_api'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8891
[33mPress CTRL+C to quit[0m
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
127.0.0.1 - - [13/Jun/2024 15:49:11] "POST /load HTTP/1.1" 200 -
/root/miniconda3/envs/embedding/lib/python3.10/site-packages/pydub/utils.py:170: RuntimeWarning: Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work
  warn("Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work", RuntimeWarning)
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你叫什么名字？
----------------ChatZOC database log ----------------

distsnce: [0.00513462582603097, 0.1233602836728096, 0.20188434422016144] 

知识库所有match: ['您叫什么名字？', '您的名字是什么？', '您叫什么？']


知识库选择: 柳某
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:50:18] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你叫什么名字？
----------------ChatZOC database log ----------------

distsnce: [0.00513462582603097, 0.1233602836728096, 0.20188434422016144] 

知识库所有match: ['您叫什么名字？', '您的名字是什么？', '您叫什么？']


知识库选择: 柳某
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:51:41] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你多大了？
----------------ChatZOC database log ----------------

distsnce: [0.2753901481628418, 0.5068706274032593, 0.5602318644523621] 

知识库所有match: ['请问您多大了？', '您目前几岁了？', '您今年多大岁数？']


知识库选择: 我今年74岁
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:51:43] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你多大了？
----------------ChatZOC database log ----------------

distsnce: [0.2753901481628418, 0.5068706274032593, 0.5602318644523621] 

知识库所有match: ['请问您多大了？', '您目前几岁了？', '您今年多大岁数？']


知识库选择: 我今年74岁
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:51:59] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你做什么工作？
----------------ChatZOC database log ----------------

distsnce: [0.10536132007837296, 0.1540735363960266, 0.23129376769065857] 

知识库所有match: ['您从事的是什么工作？', '你的工作是什么？', '您平时是从事什么工作的？']


知识库选择: 我已经退休了
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:52:00] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你做什么工作？
----------------ChatZOC database log ----------------

distsnce: [0.10536132007837296, 0.1540735363960266, 0.23129376769065857] 

知识库所有match: ['您从事的是什么工作？', '你的工作是什么？', '您平时是从事什么工作的？']


知识库选择: 我已经退休了
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:52:16] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你有什么事吗？
----------------ChatZOC database log ----------------

distsnce: [0.46757370233535767, 0.5847490429878235, 0.6714885234832764] 

知识库所有match: ['你怎么了？', '您叫什么？', '你的工作是什么？']


知识库选择: 我的眼睛突然疼痛、发红，看不清东西
柳某
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我的眼睛突然疼痛、发红，看不清东西
柳某

#医生问题#
你有什么事吗？
response: 我的眼睛突然疼痛、发红，看不清东西。



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我的眼睛突然疼痛、发红，看不清东西
柳某

#医生问题#
你有什么事吗？

**************FINISHED*****************



127.0.0.1 - - [13/Jun/2024 15:52:18] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你有什么事吗？
----------------ChatZOC database log ----------------

distsnce: [0.46757370233535767, 0.5847490429878235, 0.6714885234832764] 

知识库所有match: ['你怎么了？', '您叫什么？', '你的工作是什么？']


知识库选择: 我的眼睛突然疼痛、发红，看不清东西
柳某
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我的眼睛突然疼痛、发红，看不清东西
柳某

#医生问题#
你有什么事吗？
response: 我的眼睛突然疼痛、发红，看不清东西。



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我的眼睛突然疼痛、发红，看不清东西
柳某

#医生问题#
你有什么事吗？

**************FINISHED*****************



127.0.0.1 - - [13/Jun/2024 15:52:42] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 它持续了多久？
----------------ChatZOC database log ----------------

distsnce: [0.24135276675224304, 0.31371161341667175, 0.4041229486465454] 

知识库所有match: ['这个情况持续了多久？', '有多久了？', '多长时间了？']


知识库选择: 昨天开始的
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:52:43] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 它持续了多久？
----------------ChatZOC database log ----------------

distsnce: [0.24135276675224304, 0.31371161341667175, 0.4041229486465454] 

知识库所有match: ['这个情况持续了多久？', '有多久了？', '多长时间了？']


知识库选择: 昨天开始的
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:52:51] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 哪只眼睛？
----------------ChatZOC database log ----------------

distsnce: [0.02595514804124832, 0.11448995769023895, 0.23019298911094666] 

知识库所有match: ['是哪只眼睛？', '哪边的眼睛？', '是哪只眼睛看不清？']


知识库选择: 是左眼不舒服
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:52:52] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 哪只眼睛？
----------------ChatZOC database log ----------------

distsnce: [0.02595514804124832, 0.11448995769023895, 0.23019298911094666] 

知识库所有match: ['是哪只眼睛？', '哪边的眼睛？', '是哪只眼睛看不清？']


知识库选择: 是左眼不舒服
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:53:23] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 现在你的眼泪还多吗？
----------------ChatZOC database log ----------------

distsnce: [0.18577778339385986, 0.2884379029273987, 0.2887994647026062] 

知识库所有match: ['最近眼泪变多吗？', '您的眼睛是否有更多的泪水流出？', '您的眼睛是否流泪增多？']


知识库选择: 是的，容易流眼泪
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:53:24] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 现在你的眼泪还多吗？
----------------ChatZOC database log ----------------

distsnce: [0.18577778339385986, 0.2884379029273987, 0.2887994647026062] 

知识库所有match: ['最近眼泪变多吗？', '您的眼睛是否有更多的泪水流出？', '您的眼睛是否流泪增多？']


知识库选择: 是的，容易流眼泪
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:53:43] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你对什么过敏吗？
----------------ChatZOC database log ----------------

distsnce: [0.3119564652442932, 0.3222149610519409, 0.32271239161491394] 

知识库所有match: ['有对什么药物过敏吗？', '有对什么食物过敏吗？', '您之前是否有药物过敏的情况？']


知识库选择: 我没有药物过敏
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:53:43] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你对什么过敏吗？
----------------ChatZOC database log ----------------

distsnce: [0.3119564652442932, 0.3222149610519409, 0.32271239161491394] 

知识库所有match: ['有对什么药物过敏吗？', '有对什么食物过敏吗？', '您之前是否有药物过敏的情况？']


知识库选择: 我没有药物过敏
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:53:54] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你结婚了吗？
----------------ChatZOC database log ----------------

distsnce: [0.003782754298299551, 0.0351625457406044, 0.09223277866840363] 

知识库所有match: ['您结婚了吗？', '您是否结婚了？', '您是否已婚？']


知识库选择: 我已经结婚了
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:53:55] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你结婚了吗？
----------------ChatZOC database log ----------------

distsnce: [0.003782754298299551, 0.0351625457406044, 0.09223277866840363] 

知识库所有match: ['您结婚了吗？', '您是否结婚了？', '您是否已婚？']


知识库选择: 我已经结婚了
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:54:08] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你有孩子吗？
----------------ChatZOC database log ----------------

distsnce: [0.006740757264196873, 0.030579786747694016, 0.03405020385980606] 

知识库所有match: ['您有孩子吗？', '你有小孩吗？', '您是否有孩子？']


知识库选择: 有1个儿子，1个女儿
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:54:10] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你有孩子吗？
----------------ChatZOC database log ----------------

distsnce: [0.006740757264196873, 0.030579786747694016, 0.03405020385980606] 

知识库所有match: ['您有孩子吗？', '你有小孩吗？', '您是否有孩子？']


知识库选择: 有1个儿子，1个女儿
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:54:29] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你抽烟吗？
----------------ChatZOC database log ----------------

distsnce: [0.2530534565448761, 0.26376065611839294, 0.37877073884010315] 

知识库所有match: ['您是否经常抽烟？', '平时抽烟吗？', '您平时是否有抽烟的习惯？']


知识库选择: 我没有抽烟的习惯
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:54:30] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你抽烟吗？
----------------ChatZOC database log ----------------

distsnce: [0.2530534565448761, 0.26376065611839294, 0.37877073884010315] 

知识库所有match: ['您是否经常抽烟？', '平时抽烟吗？', '您平时是否有抽烟的习惯？']


知识库选择: 我没有抽烟的习惯
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:54:41] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 您之前有做过手术吗？
----------------ChatZOC database log ----------------

distsnce: [0.08028975129127502, 0.1330101191997528, 0.1841782033443451] 

知识库所有match: ['您是否曾经做过手术？', '您之前是否有过手术的经历？', '以前有做过手术吗？']


知识库选择: 我没有做过手术
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:54:42] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 您之前有做过手术吗？
----------------ChatZOC database log ----------------

distsnce: [0.08028975129127502, 0.1330101191997528, 0.1841782033443451] 

知识库所有match: ['您是否曾经做过手术？', '您之前是否有过手术的经历？', '以前有做过手术吗？']


知识库选择: 我没有做过手术
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:54:54] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你戴眼镜吗？
----------------ChatZOC database log ----------------

distsnce: [0.10971129685640335, 0.17398986220359802, 0.2871376574039459] 

知识库所有match: ['你有佩戴过眼镜吗', '请问你有佩戴过眼镜吗？', '以前有戴眼镜吗？']


知识库选择: 我之前视力挺好的，没戴过眼镜
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:54:55] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你戴眼镜吗？
----------------ChatZOC database log ----------------

distsnce: [0.10971129685640335, 0.17398986220359802, 0.2871376574039459] 

知识库所有match: ['你有佩戴过眼镜吗', '请问你有佩戴过眼镜吗？', '以前有戴眼镜吗？']


知识库选择: 我之前视力挺好的，没戴过眼镜
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:55:20] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你的家乡在哪？
----------------ChatZOC database log ----------------

distsnce: [0.2445792704820633, 0.30378633737564087, 0.3176887631416321] 

知识库所有match: ['您的居住地在哪里？', '你住在哪？', '你住哪里？']


知识库选择: 广州
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:55:21] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你的家乡在哪？
----------------ChatZOC database log ----------------

distsnce: [0.2445792704820633, 0.30378633737564087, 0.3176887631416321] 

知识库所有match: ['您的居住地在哪里？', '你住在哪？', '你住哪里？']


知识库选择: 广州
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:55:38] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你的电话号码是什么？
----------------ChatZOC database log ----------------

distsnce: [0.16163477301597595, 0.20186227560043335, 0.24077525734901428] 

知识库所有match: ['您的联系电话是什么？', '您电话的号码是？', '您的电话号码是多少？']


知识库选择: 这是我的隐私
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:55:39] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你的电话号码是什么？
----------------ChatZOC database log ----------------

distsnce: [0.16163477301597595, 0.20186227560043335, 0.24077525734901428] 

知识库所有match: ['您的联系电话是什么？', '您电话的号码是？', '您的电话号码是多少？']


知识库选择: 这是我的隐私
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:55:51] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你是女士吗？
----------------ChatZOC database log ----------------

distsnce: [0.14510014653205872, 0.24738822877407074, 0.24738822877407074] 

知识库所有match: ['你是男是女？', '你是男的还是女的？', '你是男的还是女的？']


知识库选择: 我是女的
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:55:52] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你是女士吗？
----------------ChatZOC database log ----------------

distsnce: [0.14510014653205872, 0.24738822877407074, 0.24738822877407074] 

知识库所有match: ['你是男是女？', '你是男的还是女的？', '你是男的还是女的？']


知识库选择: 我是女的
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:56:10] "POST /chat HTTP/1.1" 200 -
../knowledge_base_new/modified_8_麦粒肿_1.json
成功创建知识库
127.0.0.1 - - [13/Jun/2024 15:57:19] "POST /load HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你是女士吗？
----------------ChatZOC database log ----------------

distsnce: [0.14510014653205872, 0.24738822877407074, 0.24738822877407074] 

知识库所有match: ['你是男是女？', '你是男的还是女的？', '你是男的还是女的？']


知识库选择: 我是女的
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:57:22] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 你是女士吗？
----------------ChatZOC database log ----------------

distsnce: [0.14510014653205872, 0.24738822877407074, 0.24738822877407074] 

知识库所有match: ['你是男是女？', '你是男的还是女的？', '你是男的还是女的？']


知识库选择: 我是女的
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:59:17] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 您有食物过敏吗？
----------------ChatZOC database log ----------------

distsnce: [0.130007803440094, 0.1374739706516266, 0.1743943989276886] 

知识库所有match: ['您之前是否有食物过敏的情况？', '您是否曾经出现过食物过敏？', '你之前有没有食物过敏？']


知识库选择: 没有食物过敏
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:59:18] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 您有食物过敏吗？
----------------ChatZOC database log ----------------

distsnce: [0.130007803440094, 0.1374739706516266, 0.1743943989276886] 

知识库所有match: ['您之前是否有食物过敏的情况？', '您是否曾经出现过食物过敏？', '你之前有没有食物过敏？']


知识库选择: 没有食物过敏
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:59:33] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 您有药物过敏吗？
----------------ChatZOC database log ----------------

distsnce: [0.1334400624036789, 0.14199426770210266, 0.17253680527210236] 

知识库所有match: ['您之前是否有药物过敏的情况？', '您是否曾经出现过药物过敏？', '你之前有没有药物过敏？']


知识库选择: 我对磺胺类的药物过敏
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 15:59:35] "POST /chat HTTP/1.1" 200 -
 * Detected change in '/home/to_NM/demo_NM/SP_choose.py', reloading
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
 * Detected change in '/home/to_NM/demo_NM/pages/begin_asking.py', reloading
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
127.0.0.1 - - [13/Jun/2024 16:18:10] "POST /load HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19111820 user input: 您有药物过敏吗？
----------------ChatZOC database log ----------------

distsnce: [0.1334400624036789, 0.14199426770210266, 0.17253680527210236] 

知识库所有match: ['您之前是否有药物过敏的情况？', '您是否曾经出现过药物过敏？', '你之前有没有药物过敏？']


知识库选择: 我没有药物过敏
----------------ChatZOC database log over ----------------
127.0.0.1 - - [13/Jun/2024 16:18:15] "POST /chat HTTP/1.1" 200 -
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
127.0.0.1 - - [13/Jun/2024 16:18:43] "POST /load HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 19 user input: 你好吗？
----------------ChatZOC database log ----------------

distsnce: [0.5356101393699646, 0.7780976891517639, 0.7822202444076538] 

知识库所有match: ['你怎么了？', '睡眠好吗？', '你有小孩吗？']


知识库选择: 我的眼睛突然疼痛、发红，看不清东西
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我的眼睛突然疼痛、发红，看不清东西

#医生问题#
你好吗？
response: 我不好，我的眼睛突然疼痛、发红，看不清东西。



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我的眼睛突然疼痛、发红，看不清东西

#医生问题#
你好吗？

**************FINISHED*****************



127.0.0.1 - - [13/Jun/2024 16:19:10] "POST /chat HTTP/1.1" 200 -
../knowledge_base_new/modified_8_麦粒肿_1.json
成功创建知识库
127.0.0.1 - - [13/Jun/2024 16:19:35] "POST /load HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id:  user input: 你好吗
prev_flag: 1 <class 'int'> <class 'int'>
127.0.0.1 - - [13/Jun/2024 16:19:41] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id:  user input: 你好吗？
prev_flag: 0 <class 'int'> <class 'int'>
127.0.0.1 - - [13/Jun/2024 16:19:50] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id:  user input: 你好吗？
prev_flag: 0 <class 'int'> <class 'int'>
127.0.0.1 - - [13/Jun/2024 16:19:55] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id:  user input: 你有什么事吗？
----------------ChatZOC database log ----------------

distsnce: [0.46757370233535767, 0.5847490429878235, 0.6714885234832764] 

知识库所有match: ['你怎么了？', '您叫什么？', '你的工作是什么？']


知识库选择: 我的眼皮肿了，压一下还会痛
冯某某
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我的眼皮肿了，压一下还会痛
冯某某

#医生问题#
你有什么事吗？
response: 我的眼皮肿了，压一下还会痛。



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我的眼皮肿了，压一下还会痛
冯某某

#医生问题#
你有什么事吗？

**************FINISHED*****************



127.0.0.1 - - [13/Jun/2024 16:20:08] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id:  user input: 哪一边？
----------------ChatZOC database log ----------------

distsnce: [0.6130002737045288, 0.686053454875946, 0.7018213868141174] 

知识库所有match: ['你住哪里？', '您来自哪里？', '你家在哪？']


知识库选择: 我就住广州
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我就住广州

#医生问题#
哪一边？
response: 我不知道您指的是哪一边，请具体说明是问身体的哪一侧还是其他方面的问题。



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我就住广州

#医生问题#
哪一边？

**************FINISHED*****************



127.0.0.1 - - [13/Jun/2024 16:20:23] "POST /chat HTTP/1.1" 200 -
student_id : 19111820 output My name is Liu
有重复
student_id : 19111820 output My name is Liu
有重复
student_id : 19111820 output I am seventy-four years old.
未找到文件名为 I am seventy-four years old..mp3 的MP3文件。
无重复
student_id : 19111820 output I am seventy-four years old.
有重复
student_id : 19111820 output I'm retired now.
未找到文件名为 I'm retired now..mp3 的MP3文件。
无重复
student_id : 19111820 output I am currently retired.
未找到文件名为 I am currently retired..mp3 的MP3文件。
无重复
student_id : 19111820 output My eyes suddenly hurt, became red, and I couldn't see clearly.
未找到文件名为 My eyes suddenly hurt, became red, and I couldn't .mp3 的MP3文件。
无重复
student_id : 19111820 output My eyes suddenly hurt, became red, and I couldn't see clearly.
有重复
student_id : 19111820 output I started feeling unwell yesterday.
未找到文件名为 I started feeling unwell yesterday..mp3 的MP3文件。
无重复
student_id : 19111820 output I started feeling unwell yesterday.
有重复
student_id : 19111820 output My left eye feels uncomfortable.
有重复
student_id : 19111820 output My left eye feels uncomfortable.
有重复
student_id : 19111820 output I still cry easily.
未找到文件名为 I still cry easily..mp3 的MP3文件。
无重复
student_id : 19111820 output I still cry easily.
有重复
student_id : 19111820 output I have no history of any drug allergies.
有重复
student_id : 19111820 output I have no history of any drug allergies.
有重复
student_id : 19111820 output I'm married.
未找到文件名为 I'm married..mp3 的MP3文件。
无重复
student_id : 19111820 output I'm married.
有重复
student_id : 19111820 output I have a son and a daughter.
未找到文件名为 I have a son and a daughter..mp3 的MP3文件。
无重复
time pass: 309 <class 'int'>
student_id : 19111820 output I have a son and a daughter.
有重复
student_id : 19111820 output I don't smoke.
未找到文件名为 I don't smoke..mp3 的MP3文件。
无重复
student_id : 19111820 output I don't smoke.
有重复
student_id : 19111820 output I have not had any surgeries.
未找到文件名为 I have not had any surgeries..mp3 的MP3文件。
无重复
student_id : 19111820 output I have not had any surgeries.
有重复
student_id : 19111820 output My eyesight used to be pretty good, so I didn’t have the habit of wearing glasses.
未找到文件名为 My eyesight used to be pretty good, so I didn’t ha.mp3 的MP3文件。
无重复
student_id : 19111820 output My eyesight was fine before, so I never wore glasses.
未找到文件名为 My eyesight was fine before, so I never wore glass.mp3 的MP3文件。
无重复
student_id : 19111820 output My hometown is Guangzhou.
未找到文件名为 My hometown is Guangzhou..mp3 的MP3文件。
无重复
student_id : 19111820 output My hometown is Guangzhou.
有重复
student_id : 19111820 output This is my private information.
有重复
student_id : 19111820 output This is my private information.
有重复
student_id : 19111820 output I'm female.
未找到文件名为 I'm female..mp3 的MP3文件。
无重复
student_id : 19111820 output I'm female.
有重复
student_id : 19111820 output I'm female.
有重复
student_id : 19111820 output I'm female.
有重复
student_id : 19111820 output I have no documented food allergies.
有重复
student_id : 19111820 output I don't have any food allergies.
未找到文件名为 I don't have any food allergies..mp3 的MP3文件。
无重复
student_id : 19111820 output I have an allergic reaction to sulfa drugs.
未找到文件名为 I have an allergic reaction to sulfa drugs..mp3 的MP3文件。
无重复
student_id : 19111820 output I have no history of drug allergies.
有重复
student_id : 19 output I'm not good. My eyes suddenly hurt and became red, and I couldn't see clearly.
未找到文件名为 I'm not good. My eyes suddenly hurt and became red.mp3 的MP3文件。
无重复
student_id :  output What exactly are you asking about? Can you be a little more detailed?
有重复
student_id :  output This is not very clear.
有重复
student_id :  output This is not clear
有重复
student_id :  output My eyelids are swollen and it hurts when I press them.
未找到文件名为 My eyelids are swollen and it hurts when I press t.mp3 的MP3文件。
无重复
student_id :  output I don't know which side you are referring to, please specify which side of the body you are asking about or something else.
未找到文件名为 I don't know which side you are referring to, plea.mp3 的MP3文件。
无重复
  Stopping...
 * Serving Flask app 'teaching_api'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8891
[33mPress CTRL+C to quit[0m
 * Restarting with watchdog (inotify)

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://172.21.46.28:8501
  External URL: http://47.251.55.66:8501

 * Debugger is active!
 * Debugger PIN: 125-435-311
127.0.0.1 - - [16/Jun/2024 00:03:18] "POST /load HTTP/1.1" 200 -
/root/miniconda3/envs/embedding/lib/python3.10/site-packages/pydub/utils.py:170: RuntimeWarning: Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work
  warn("Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work", RuntimeWarning)
127.0.0.1 - - [16/Jun/2024 00:03:37] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [16/Jun/2024 10:22:10] "POST /load HTTP/1.1" 200 -
127.0.0.1 - - [16/Jun/2024 10:22:40] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [16/Jun/2024 10:23:16] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [16/Jun/2024 10:23:45] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [16/Jun/2024 10:24:07] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [16/Jun/2024 10:24:23] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [16/Jun/2024 10:24:35] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [16/Jun/2024 10:59:36] "POST /load HTTP/1.1" 200 -
2024-06-16 11:30:16.560 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-16 12:04:29.732 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-16 12:06:23.150 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-16 12:34:33.672 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-16 13:27:37.550 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-16 14:00:45.723 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
127.0.0.1 - - [16/Jun/2024 14:44:02] "POST /load HTTP/1.1" 200 -
127.0.0.1 - - [16/Jun/2024 14:44:13] "POST /chat HTTP/1.1" 200 -
2024-06-16 14:57:23.036 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
127.0.0.1 - - [16/Jun/2024 14:57:37] "POST /load HTTP/1.1" 200 -
2024-06-16 15:25:38.525 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-16 15:31:43.114 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-16 16:25:19.706 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-16 17:18:55.505 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-16 17:51:48.493 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-16 18:03:31.930 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-16 20:15:16.925 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-16 20:44:21.150 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-16 21:38:15.105 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-16 21:54:57.589 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-16 22:00:40.891 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
127.0.0.1 - - [16/Jun/2024 23:34:50] "POST /load HTTP/1.1" 200 -
127.0.0.1 - - [16/Jun/2024 23:35:04] "POST /chat HTTP/1.1" 200 -
student_id :  output I am 74 years old.
有重复
student_id : 123 output My name is Liu
有重复
student_id : 123 output My eyes suddenly hurt, became red, and I couldn't see clearly.
有重复
student_id : 123 output My eyes suddenly hurt, became red, and I couldn't see clearly.
有重复
student_id : 123 output I am seventy-four years old.
有重复
student_id : 123 output I don't have any drug allergies.
有重复
student_id : 123 output I have no food allergies.
未找到文件名为 I have no food allergies..mp3 的MP3文件。
无重复
time pass: 1601 <class 'int'>
time pass: 1601 <class 'int'>
time pass: 1601 <class 'int'>
student_id : 123 output I'm worried about my eye disease now. Please stop chatting.
有重复
student_id : 123 output I'm from Guangdong.
有重复
  Stopping...
 * Serving Flask app 'teaching_api'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8891
[33mPress CTRL+C to quit[0m
 * Restarting with watchdog (inotify)

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://172.21.46.28:8501
  External URL: http://47.251.88.253:8501

 * Debugger is active!
 * Debugger PIN: 125-435-311
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
127.0.0.1 - - [19/Jun/2024 06:02:00] "POST /load HTTP/1.1" 200 -
/root/miniconda3/envs/embedding/lib/python3.10/site-packages/pydub/utils.py:170: RuntimeWarning: Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work
  warn("Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work", RuntimeWarning)
------------ chatZOC api called -------------------------

student_id: plp user input: 姓名
----------------ChatZOC database log ----------------

distsnce: [0.4972049593925476, 0.5243831872940063, 0.70323646068573] 

知识库所有match: ['您的姓名是？', '您叫什么名字？', '您的名字是什么？']


知识库选择: 柳某
柳某
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
柳某
柳某

#医生问题#
姓名
response: 柳某。



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
柳某
柳某

#医生问题#
姓名

**************FINISHED*****************



127.0.0.1 - - [19/Jun/2024 06:02:10] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: plp user input: 性别
----------------ChatZOC database log ----------------

distsnce: [0.6089893579483032, 0.6746888756752014, 0.69148188829422] 

知识库所有match: ['你是什么性别？', '您是男性还是女性？', '你的性别是什么？']


知识库选择: 我是女的
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我是女的

#医生问题#
性别
response: 我是女性。



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我是女的

#医生问题#
性别

**************FINISHED*****************



127.0.0.1 - - [19/Jun/2024 06:02:18] "POST /chat HTTP/1.1" 200 -
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
127.0.0.1 - - [19/Jun/2024 08:16:20] "POST /load HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 1234 user input: 你叫什么名字
----------------ChatZOC database log ----------------

distsnce: [0.04317820817232132, 0.16676577925682068, 0.24755516648292542] 

知识库所有match: ['您叫什么名字？', '您的名字是什么？', '您叫什么？']


知识库选择: 柳某
----------------ChatZOC database log over ----------------
127.0.0.1 - - [19/Jun/2024 08:16:28] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 1234 user input: 你有药物过敏吗？
----------------ChatZOC database log ----------------

distsnce: [0.13178063929080963, 0.1377270370721817, 0.16395440697669983] 

知识库所有match: ['您之前是否有药物过敏的情况？', '您是否曾经出现过药物过敏？', '你之前有没有药物过敏？']


知识库选择: 我没有药物过敏
----------------ChatZOC database log over ----------------
127.0.0.1 - - [19/Jun/2024 08:16:43] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 1234 user input: 你有食物过敏吗？
----------------ChatZOC database log ----------------

distsnce: [0.1286655068397522, 0.13331598043441772, 0.16683804988861084] 

知识库所有match: ['您之前是否有食物过敏的情况？', '您是否曾经出现过食物过敏？', '你之前有没有食物过敏？']


知识库选择: 没有食物过敏
----------------ChatZOC database log over ----------------
127.0.0.1 - - [19/Jun/2024 08:16:53] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 1234 user input: 你有头痛吗？
----------------ChatZOC database log ----------------

distsnce: [0.11376914381980896, 0.1787666380405426, 0.22303679585456848] 

知识库所有match: ['您是否感到头痛？', '您是否有头痛的症状？', '有没有头痛？']


知识库选择: 可能有吧，特别是左边，眼睛痛了以后感觉头也跟着痛了
----------------ChatZOC database log over ----------------
127.0.0.1 - - [19/Jun/2024 08:17:07] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 1234 user input: 你的眼睛有什么问题吗？
----------------ChatZOC database log ----------------

distsnce: [0.15060028433799744, 0.1905369758605957, 0.27493828535079956] 

知识库所有match: ['你哪只眼睛出问题了？', '您眼睛出现了什么样的问题或症状？', '眼睛还有别的问题吗？']


知识库选择: 是左眼不舒服
----------------ChatZOC database log over ----------------
127.0.0.1 - - [19/Jun/2024 08:18:22] "POST /chat HTTP/1.1" 200 -
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
127.0.0.1 - - [19/Jun/2024 16:56:34] "POST /load HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 1234 user input: 你的眼睛怎么了
----------------ChatZOC database log ----------------

distsnce: [0.19509637355804443, 0.2064376175403595, 0.3570922017097473] 

知识库所有match: ['你眼睛怎么回事？', '眼睛怎么了？', '你的眼睛干吗？']


知识库选择: 我的眼睛突然疼痛、发红，看不清东西
----------------ChatZOC database log over ----------------
127.0.0.1 - - [19/Jun/2024 16:57:04] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 1234 user input: 是左眼还是右眼
----------------ChatZOC database log ----------------

distsnce: [0.06382980197668076, 0.14697465300559998, 0.29871073365211487] 

知识库所有match: ['是左眼还是右眼？', '请问是左眼还是右眼？', '您是左眼还是右眼还是双眼痛？']


知识库选择: 是左眼不舒服
----------------ChatZOC database log over ----------------
127.0.0.1 - - [19/Jun/2024 16:57:22] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 1234 user input: 有没有食物过敏
----------------ChatZOC database log ----------------

distsnce: [0.34687596559524536, 0.40252867341041565, 0.5036909580230713] 

知识库所有match: ['你之前有没有食物过敏？', '有对什么食物过敏吗？', '您之前是否有食物过敏的情况？']


知识库选择: 没有食物过敏
----------------ChatZOC database log over ----------------
127.0.0.1 - - [19/Jun/2024 16:57:43] "POST /chat HTTP/1.1" 200 -
2024-06-19 17:44:37.700 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-19 17:56:21.258 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-19 19:27:30.668 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-19 22:02:46.397 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-19 22:33:33.066 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-19 22:37:54.616 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-19 22:42:17.947 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-20 01:20:18.218 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-20 01:51:09.276 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-20 03:21:24.160 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-20 04:51:55.887 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-20 05:52:00.041 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-20 08:09:45.214 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-20 08:20:55.328 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-20 11:40:30.856 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-20 11:43:14.465 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
127.0.0.1 - - [21/Jun/2024 08:32:28] "POST /load HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 1234 user input: 你叫什么名字
----------------ChatZOC database log ----------------

distsnce: [0.04317820817232132, 0.16676577925682068, 0.24755516648292542] 

知识库所有match: ['您叫什么名字？', '您的名字是什么？', '您叫什么？']


知识库选择: 柳某
----------------ChatZOC database log over ----------------
127.0.0.1 - - [21/Jun/2024 08:32:40] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 1234 user input: 你几岁
----------------ChatZOC database log ----------------

distsnce: [0.2511430084705353, 0.2915347218513489, 0.3618065118789673] 

知识库所有match: ['您目前几岁了？', '您今年几岁？', '你今年是多少岁？']


知识库选择: 我今年74岁
----------------ChatZOC database log over ----------------
127.0.0.1 - - [21/Jun/2024 08:32:49] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 1234 user input: 你是男性还是女性
----------------ChatZOC database log ----------------

distsnce: [0.06639339029788971, 0.08929527550935745, 0.08929527550935745] 

知识库所有match: ['您是男性还是女性？', '你是男的还是女的？', '你是男的还是女的？']


知识库选择: 我是女的
----------------ChatZOC database log over ----------------
127.0.0.1 - - [21/Jun/2024 08:33:00] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 1234 user input: 有趣的是你怎么了
----------------ChatZOC database log ----------------

distsnce: [0.3892515003681183, 0.8312795758247375, 0.8368796706199646] 

知识库所有match: ['你怎么了？', '您的联系方式是什么？', '您的名字是什么？']


知识库选择: 我的眼睛突然疼痛、发红，看不清东西
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我的眼睛突然疼痛、发红，看不清东西

#医生问题#
有趣的是你怎么了
response: 我的眼睛突然疼痛、发红，看不清东西。



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我的眼睛突然疼痛、发红，看不清东西

#医生问题#
有趣的是你怎么了

**************FINISHED*****************



127.0.0.1 - - [21/Jun/2024 08:33:20] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 1234 user input: 多久了？
----------------ChatZOC database log ----------------

distsnce: [0.02597859501838684, 0.16379094123840332, 0.377845823764801] 

知识库所有match: ['有多久了？', '多长时间了？', '这个情况持续了多久？']


知识库选择: 昨天开始的
----------------ChatZOC database log over ----------------
127.0.0.1 - - [21/Jun/2024 08:33:34] "POST /chat HTTP/1.1" 200 -
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
127.0.0.1 - - [25/Jun/2024 08:30:20] "POST /load HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 12348888 user input: 我想问，为什么你眼睛到底哪里不舒服
----------------ChatZOC database log ----------------

distsnce: [0.24725496768951416, 0.31215396523475647, 0.3462091088294983] 

知识库所有match: ['您眼睛是什么地方不舒服？', '请问你这次是因为什么眼睛不舒服来就诊呢？', '您眼睛有什么不舒服？']


知识库选择: 我的眼睛突然疼痛、发红，看不清东西
----------------ChatZOC database log over ----------------
127.0.0.1 - - [25/Jun/2024 08:30:32] "POST /chat HTTP/1.1" 200 -
2024-06-25 09:01:43.302 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-25 09:20:03.893 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-25 09:35:47.967 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-25 10:18:16.457 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-25 10:42:58.088 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
 * Detected change in '/home/to_NM/demo_NM/pages/开始问诊.py', reloading
 * Detected change in '/home/to_NM/demo_NM/pages/开始问诊.py', reloading
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 125-435-311
 * Detected change in '/home/to_NM/demo_NM/选择标准病人.py', reloading
 * Detected change in '/home/to_NM/demo_NM/选择标准病人.py', reloading
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 125-435-311
 * Detected change in '/home/to_NM/demo_NM/teaching_api_zh.py', reloading
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 125-435-311
 * Detected change in '/home/to_NM/demo_NM/teaching_api_zh.py', reloading
 * Detected change in '/home/to_NM/demo_NM/选择标准病人.py', reloading
 * Detected change in '/home/to_NM/demo_NM/pages/开始问诊.py', reloading
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 125-435-311
 * Serving Flask app 'teaching_api_zh'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8892
[33mPress CTRL+C to quit[0m
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 850-878-657
 * Serving Flask app 'teaching_api_zh'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8892
[33mPress CTRL+C to quit[0m
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 850-878-657

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/bin/streamlit", line 8, in <module>
    sys.exit(main())
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/click/core.py", line 1157, in __call__
    return self.main(*args, **kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/click/core.py", line 1078, in main
    rv = self.invoke(ctx)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/click/core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/click/core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/click/core.py", line 783, in invoke
    return __callback(*args, **kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/web/cli.py", line 234, in main_run
    _main_run(target, args, flag_options=kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/web/cli.py", line 270, in _main_run
    bootstrap.run(file, is_hello, args, flag_options)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/web/bootstrap.py", line 382, in run
    _install_pages_watcher(main_script_path)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/web/bootstrap.py", line 358, in _install_pages_watcher
    watch_dir(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/path_watcher.py", line 151, in watch_dir
    return _watch_path(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/path_watcher.py", line 126, in _watch_path
    watcher_class(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 95, in __init__
    path_watcher.watch_path(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 173, in watch_path
    folder_handler.watch = self._observer.schedule(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/api.py", line 323, in schedule
    emitter.start()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/utils/__init__.py", line 92, in start
    self.on_thread_start()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/inotify.py", line 125, in on_thread_start
    self._inotify = InotifyBuffer(path, self.watch.is_recursive, event_mask)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/inotify_buffer.py", line 37, in __init__
    self._inotify = Inotify(path, recursive, event_mask)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/inotify_c.py", line 174, in __init__
    self._add_dir_watch(path, recursive, event_mask)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/inotify_c.py", line 380, in _add_dir_watch
    self._add_watch(path, mask)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/inotify_c.py", line 401, in _add_watch
    Inotify._raise_error()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/inotify_c.py", line 413, in _raise_error
    raise OSError(errno.ENOSPC, "inotify watch limit reached")
OSError: [Errno 28] inotify watch limit reached
2024-06-25 22:53:18.944 Uncaught exception GET /_stcore/stream (45.150.165.8)
HTTPServerRequest(protocol='http', host='www.chatzoc.xyz:8501', method='GET', uri='/_stcore/stream', version='HTTP/1.1', remote_ip='45.150.165.8')
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 938, in _accept_connection
    open_result = handler.open(*handler.open_args, **handler.open_kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/web/server/browser_websocket_handler.py", line 127, in open
    self._session_id = self._runtime.connect_session(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/runtime.py", line 386, in connect_session
    session_id = self._session_mgr.connect_session(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/websocket_session_manager.py", line 97, in connect_session
    session = AppSession(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/app_session.py", line 147, in __init__
    self.register_file_watchers()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/app_session.py", line 184, in register_file_watchers
    self._local_sources_watcher = LocalSourcesWatcher(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/local_sources_watcher.py", line 58, in __init__
    self.update_watched_pages()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/local_sources_watcher.py", line 67, in update_watched_pages
    self._register_watcher(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/local_sources_watcher.py", line 122, in _register_watcher
    watcher=PathWatcher(filepath, self.on_file_changed),
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 95, in __init__
    path_watcher.watch_path(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 173, in watch_path
    folder_handler.watch = self._observer.schedule(
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/api.py", line 323, in schedule
    emitter.start()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/utils/__init__.py", line 92, in start
    self.on_thread_start()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/inotify.py", line 125, in on_thread_start
    self._inotify = InotifyBuffer(path, self.watch.is_recursive, event_mask)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/inotify_buffer.py", line 37, in __init__
    self._inotify = Inotify(path, recursive, event_mask)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/inotify_c.py", line 174, in __init__
    self._add_dir_watch(path, recursive, event_mask)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/inotify_c.py", line 380, in _add_dir_watch
    self._add_watch(path, mask)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/inotify_c.py", line 401, in _add_watch
    Inotify._raise_error()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/inotify_c.py", line 413, in _raise_error
    raise OSError(errno.ENOSPC, "inotify watch limit reached")
OSError: [Errno 28] inotify watch limit reached
Exception ignored in: <function AppSession.__del__ at 0x7fd00e6dfac0>
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/app_session.py", line 167, in __del__
    self.shutdown()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/app_session.py", line 249, in shutdown
    self.request_script_stop()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/app_session.py", line 396, in request_script_stop
    if self._scriptrunner is not None:
AttributeError: 'AppSession' object has no attribute '_scriptrunner'
 * Detected change in '/home/to_NM/demo_NM/pages/开始问诊.py', reloading
 * Detected change in '/home/to_NM/demo_NM/pages/开始问诊.py', reloading
 * Restarting with watchdog (inotify)
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 125-435-311
 * Debugger is active!
 * Debugger PIN: 850-878-657
2024-06-25 22:55:58.794 Uncaught exception GET /_stcore/stream (45.150.165.8)
HTTPServerRequest(protocol='http', host='www.chatzoc.xyz:8501', method='GET', uri='/_stcore/stream', version='HTTP/1.1', remote_ip='45.150.165.8')
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/web.py", line 1790, in _execute
    result = await result
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 273, in get
    await self.ws_connection.accept_connection(self)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 863, in accept_connection
    await self._accept_connection(handler)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 946, in _accept_connection
    await self._receive_frame_loop()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 1105, in _receive_frame_loop
    self.handler.on_ws_connection_close(self.close_code, self.close_reason)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 571, in on_ws_connection_close
    self.on_connection_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 563, in on_connection_close
    self.on_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/web/server/browser_websocket_handler.py", line 137, in on_close
    self._runtime.disconnect_session(self._session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/runtime.py", line 474, in disconnect_session
    self._session_mgr.disconnect_session(session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/websocket_session_manager.py", line 123, in disconnect_session
    session.disconnect_file_watchers()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/app_session.py", line 202, in disconnect_file_watchers
    self._local_sources_watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/local_sources_watcher.py", line 107, in close
    wm.watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 109, in close
    path_watcher.stop_watching_path(self._path, self._on_changed)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 202, in stop_watching_path
    self._observer.unschedule(folder_handler.watch)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/api.py", line 374, in unschedule
    emitter = self._emitter_for_watch[watch]
KeyError: None
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
127.0.0.1 - - [25/Jun/2024 23:06:15] "POST /load HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 9898 user input: 你的名字
----------------ChatZOC database log ----------------

distsnce: [0.24164295196533203, 0.2790876030921936, 0.3054617941379547] 

知识库所有match: ['您的姓名是？', '您叫什么名字？', '您的名字是什么？']


知识库选择: 柳某
----------------ChatZOC database log over ----------------
127.0.0.1 - - [25/Jun/2024 23:06:24] "POST /chat HTTP/1.1" 200 -
2024-06-25 23:28:33.860 Uncaught exception GET /_stcore/stream (45.150.165.8)
HTTPServerRequest(protocol='http', host='www.chatzoc.xyz:8501', method='GET', uri='/_stcore/stream', version='HTTP/1.1', remote_ip='45.150.165.8')
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/web.py", line 1790, in _execute
    result = await result
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 273, in get
    await self.ws_connection.accept_connection(self)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 863, in accept_connection
    await self._accept_connection(handler)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 946, in _accept_connection
    await self._receive_frame_loop()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 1105, in _receive_frame_loop
    self.handler.on_ws_connection_close(self.close_code, self.close_reason)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 571, in on_ws_connection_close
    self.on_connection_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 563, in on_connection_close
    self.on_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/web/server/browser_websocket_handler.py", line 137, in on_close
    self._runtime.disconnect_session(self._session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/runtime.py", line 474, in disconnect_session
    self._session_mgr.disconnect_session(session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/websocket_session_manager.py", line 123, in disconnect_session
    session.disconnect_file_watchers()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/app_session.py", line 202, in disconnect_file_watchers
    self._local_sources_watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/local_sources_watcher.py", line 107, in close
    wm.watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 109, in close
    path_watcher.stop_watching_path(self._path, self._on_changed)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 202, in stop_watching_path
    self._observer.unschedule(folder_handler.watch)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/api.py", line 374, in unschedule
    emitter = self._emitter_for_watch[watch]
KeyError: None
../knowledge_base_new/modified_8_麦粒肿_1.json
成功创建知识库
127.0.0.1 - - [26/Jun/2024 15:33:52] "POST /load HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 1234lmj user input: 你有药物过敏吗
----------------ChatZOC database log ----------------

distsnce: [0.16498908400535583, 0.17712458968162537, 0.18019725382328033] 

知识库所有match: ['您之前是否有药物过敏的情况？', '您是否曾经出现过药物过敏？', '你之前有没有药物过敏？']


知识库选择: 我对磺胺类的药物过敏
----------------ChatZOC database log over ----------------
127.0.0.1 - - [26/Jun/2024 15:34:17] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 1234lmj user input: 你有食物过敏吗
----------------ChatZOC database log ----------------

distsnce: [0.1605108231306076, 0.1702020764350891, 0.1822941154241562] 

知识库所有match: ['您之前是否有食物过敏的情况？', '您是否曾经出现过食物过敏？', '你之前有没有食物过敏？']


知识库选择: 没有食物过敏
----------------ChatZOC database log over ----------------
127.0.0.1 - - [26/Jun/2024 15:34:28] "POST /chat HTTP/1.1" 200 -
2024-06-26 15:58:19.300 Uncaught exception GET /_stcore/stream (112.96.49.53)
HTTPServerRequest(protocol='http', host='www.chatzoc.xyz:8501', method='GET', uri='/_stcore/stream', version='HTTP/1.1', remote_ip='112.96.49.53')
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/web.py", line 1790, in _execute
    result = await result
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 273, in get
    await self.ws_connection.accept_connection(self)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 863, in accept_connection
    await self._accept_connection(handler)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 946, in _accept_connection
    await self._receive_frame_loop()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 1105, in _receive_frame_loop
    self.handler.on_ws_connection_close(self.close_code, self.close_reason)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 571, in on_ws_connection_close
    self.on_connection_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 563, in on_connection_close
    self.on_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/web/server/browser_websocket_handler.py", line 137, in on_close
    self._runtime.disconnect_session(self._session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/runtime.py", line 474, in disconnect_session
    self._session_mgr.disconnect_session(session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/websocket_session_manager.py", line 123, in disconnect_session
    session.disconnect_file_watchers()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/app_session.py", line 202, in disconnect_file_watchers
    self._local_sources_watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/local_sources_watcher.py", line 107, in close
    wm.watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 109, in close
    path_watcher.stop_watching_path(self._path, self._on_changed)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 202, in stop_watching_path
    self._observer.unschedule(folder_handler.watch)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/api.py", line 374, in unschedule
    emitter = self._emitter_for_watch[watch]
KeyError: None
2024-06-26 15:58:21.973 Session with id 624193eb-a405-47eb-a28d-af8473bf14eb is already connected! Connecting to a new session.
2024-06-26 15:58:22.204 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-26 16:33:11.180 Uncaught exception GET /_stcore/stream (112.96.49.53)
HTTPServerRequest(protocol='http', host='www.chatzoc.xyz:8501', method='GET', uri='/_stcore/stream', version='HTTP/1.1', remote_ip='112.96.49.53')
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/web.py", line 1790, in _execute
    result = await result
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 273, in get
    await self.ws_connection.accept_connection(self)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 863, in accept_connection
    await self._accept_connection(handler)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 946, in _accept_connection
    await self._receive_frame_loop()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 1105, in _receive_frame_loop
    self.handler.on_ws_connection_close(self.close_code, self.close_reason)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 571, in on_ws_connection_close
    self.on_connection_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 563, in on_connection_close
    self.on_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/web/server/browser_websocket_handler.py", line 137, in on_close
    self._runtime.disconnect_session(self._session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/runtime.py", line 474, in disconnect_session
    self._session_mgr.disconnect_session(session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/websocket_session_manager.py", line 123, in disconnect_session
    session.disconnect_file_watchers()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/app_session.py", line 202, in disconnect_file_watchers
    self._local_sources_watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/local_sources_watcher.py", line 107, in close
    wm.watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 109, in close
    path_watcher.stop_watching_path(self._path, self._on_changed)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 202, in stop_watching_path
    self._observer.unschedule(folder_handler.watch)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/api.py", line 374, in unschedule
    emitter = self._emitter_for_watch[watch]
KeyError: None
2024-06-26 16:33:11.920 Session with id 4aeb93d6-67ea-42d6-8fe5-3d95c35b9252 is already connected! Connecting to a new session.
2024-06-26 16:33:12.133 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-06-26 16:34:36.748 Uncaught exception GET /_stcore/stream (37.123.193.41)
HTTPServerRequest(protocol='http', host='www.chatzoc.xyz:8501', method='GET', uri='/_stcore/stream', version='HTTP/1.1', remote_ip='37.123.193.41')
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/web.py", line 1790, in _execute
    result = await result
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 273, in get
    await self.ws_connection.accept_connection(self)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 863, in accept_connection
    await self._accept_connection(handler)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 946, in _accept_connection
    await self._receive_frame_loop()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 1105, in _receive_frame_loop
    self.handler.on_ws_connection_close(self.close_code, self.close_reason)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 571, in on_ws_connection_close
    self.on_connection_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 563, in on_connection_close
    self.on_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/web/server/browser_websocket_handler.py", line 137, in on_close
    self._runtime.disconnect_session(self._session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/runtime.py", line 474, in disconnect_session
    self._session_mgr.disconnect_session(session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/websocket_session_manager.py", line 123, in disconnect_session
    session.disconnect_file_watchers()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/app_session.py", line 202, in disconnect_file_watchers
    self._local_sources_watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/local_sources_watcher.py", line 107, in close
    wm.watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 109, in close
    path_watcher.stop_watching_path(self._path, self._on_changed)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 202, in stop_watching_path
    self._observer.unschedule(folder_handler.watch)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/api.py", line 374, in unschedule
    emitter = self._emitter_for_watch[watch]
KeyError: None
2024-06-26 16:37:41.260 Uncaught exception GET /_stcore/stream (37.123.193.41)
HTTPServerRequest(protocol='http', host='www.chatzoc.xyz:8501', method='GET', uri='/_stcore/stream', version='HTTP/1.1', remote_ip='37.123.193.41')
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/web.py", line 1790, in _execute
    result = await result
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 273, in get
    await self.ws_connection.accept_connection(self)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 863, in accept_connection
    await self._accept_connection(handler)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 946, in _accept_connection
    await self._receive_frame_loop()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 1105, in _receive_frame_loop
    self.handler.on_ws_connection_close(self.close_code, self.close_reason)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 571, in on_ws_connection_close
    self.on_connection_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 563, in on_connection_close
    self.on_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/web/server/browser_websocket_handler.py", line 137, in on_close
    self._runtime.disconnect_session(self._session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/runtime.py", line 474, in disconnect_session
    self._session_mgr.disconnect_session(session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/websocket_session_manager.py", line 123, in disconnect_session
    session.disconnect_file_watchers()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/app_session.py", line 202, in disconnect_file_watchers
    self._local_sources_watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/local_sources_watcher.py", line 107, in close
    wm.watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 109, in close
    path_watcher.stop_watching_path(self._path, self._on_changed)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 202, in stop_watching_path
    self._observer.unschedule(folder_handler.watch)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/api.py", line 374, in unschedule
    emitter = self._emitter_for_watch[watch]
KeyError: None
2024-06-26 18:40:08.525 Uncaught exception GET /_stcore/stream (198.181.42.81)
HTTPServerRequest(protocol='http', host='www.chatzoc.xyz:8501', method='GET', uri='/_stcore/stream', version='HTTP/1.1', remote_ip='198.181.42.81')
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/web.py", line 1790, in _execute
    result = await result
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 273, in get
    await self.ws_connection.accept_connection(self)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 863, in accept_connection
    await self._accept_connection(handler)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 946, in _accept_connection
    await self._receive_frame_loop()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 1105, in _receive_frame_loop
    self.handler.on_ws_connection_close(self.close_code, self.close_reason)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 571, in on_ws_connection_close
    self.on_connection_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 563, in on_connection_close
    self.on_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/web/server/browser_websocket_handler.py", line 137, in on_close
    self._runtime.disconnect_session(self._session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/runtime.py", line 474, in disconnect_session
    self._session_mgr.disconnect_session(session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/websocket_session_manager.py", line 123, in disconnect_session
    session.disconnect_file_watchers()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/app_session.py", line 202, in disconnect_file_watchers
    self._local_sources_watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/local_sources_watcher.py", line 107, in close
    wm.watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 109, in close
    path_watcher.stop_watching_path(self._path, self._on_changed)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 202, in stop_watching_path
    self._observer.unschedule(folder_handler.watch)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/api.py", line 374, in unschedule
    emitter = self._emitter_for_watch[watch]
KeyError: None
2024-06-26 18:40:09.096 Session with id 3d64c662-6330-4ff0-a765-4b8e5d2c862e is already connected! Connecting to a new session.
2024-06-26 18:40:10.084 Uncaught exception GET /_stcore/stream (198.181.42.81)
HTTPServerRequest(protocol='http', host='www.chatzoc.xyz:8501', method='GET', uri='/_stcore/stream', version='HTTP/1.1', remote_ip='198.181.42.81')
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/web.py", line 1790, in _execute
    result = await result
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 273, in get
    await self.ws_connection.accept_connection(self)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 863, in accept_connection
    await self._accept_connection(handler)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 946, in _accept_connection
    await self._receive_frame_loop()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 1105, in _receive_frame_loop
    self.handler.on_ws_connection_close(self.close_code, self.close_reason)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 571, in on_ws_connection_close
    self.on_connection_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 563, in on_connection_close
    self.on_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/web/server/browser_websocket_handler.py", line 137, in on_close
    self._runtime.disconnect_session(self._session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/runtime.py", line 474, in disconnect_session
    self._session_mgr.disconnect_session(session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/websocket_session_manager.py", line 123, in disconnect_session
    session.disconnect_file_watchers()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/app_session.py", line 202, in disconnect_file_watchers
    self._local_sources_watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/local_sources_watcher.py", line 107, in close
    wm.watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 109, in close
    path_watcher.stop_watching_path(self._path, self._on_changed)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 202, in stop_watching_path
    self._observer.unschedule(folder_handler.watch)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/api.py", line 374, in unschedule
    emitter = self._emitter_for_watch[watch]
KeyError: None
2024-06-26 18:40:12.983 Uncaught exception GET /_stcore/stream (198.181.42.81)
HTTPServerRequest(protocol='http', host='www.chatzoc.xyz:8501', method='GET', uri='/_stcore/stream', version='HTTP/1.1', remote_ip='198.181.42.81')
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/web.py", line 1790, in _execute
    result = await result
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 273, in get
    await self.ws_connection.accept_connection(self)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 863, in accept_connection
    await self._accept_connection(handler)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 946, in _accept_connection
    await self._receive_frame_loop()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 1105, in _receive_frame_loop
    self.handler.on_ws_connection_close(self.close_code, self.close_reason)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 571, in on_ws_connection_close
    self.on_connection_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 563, in on_connection_close
    self.on_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/web/server/browser_websocket_handler.py", line 137, in on_close
    self._runtime.disconnect_session(self._session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/runtime.py", line 474, in disconnect_session
    self._session_mgr.disconnect_session(session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/websocket_session_manager.py", line 123, in disconnect_session
    session.disconnect_file_watchers()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/app_session.py", line 202, in disconnect_file_watchers
    self._local_sources_watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/local_sources_watcher.py", line 107, in close
    wm.watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 109, in close
    path_watcher.stop_watching_path(self._path, self._on_changed)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 202, in stop_watching_path
    self._observer.unschedule(folder_handler.watch)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/api.py", line 374, in unschedule
    emitter = self._emitter_for_watch[watch]
KeyError: None
2024-06-26 22:28:33.044 Uncaught exception GET /_stcore/stream (45.142.159.200)
HTTPServerRequest(protocol='http', host='www.chatzoc.xyz:8501', method='GET', uri='/_stcore/stream', version='HTTP/1.1', remote_ip='45.142.159.200')
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/web.py", line 1790, in _execute
    result = await result
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 273, in get
    await self.ws_connection.accept_connection(self)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 863, in accept_connection
    await self._accept_connection(handler)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 946, in _accept_connection
    await self._receive_frame_loop()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 1105, in _receive_frame_loop
    self.handler.on_ws_connection_close(self.close_code, self.close_reason)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 571, in on_ws_connection_close
    self.on_connection_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/tornado/websocket.py", line 563, in on_connection_close
    self.on_close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/web/server/browser_websocket_handler.py", line 137, in on_close
    self._runtime.disconnect_session(self._session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/runtime.py", line 474, in disconnect_session
    self._session_mgr.disconnect_session(session_id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/websocket_session_manager.py", line 123, in disconnect_session
    session.disconnect_file_watchers()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/app_session.py", line 202, in disconnect_file_watchers
    self._local_sources_watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/local_sources_watcher.py", line 107, in close
    wm.watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 109, in close
    path_watcher.stop_watching_path(self._path, self._on_changed)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 202, in stop_watching_path
    self._observer.unschedule(folder_handler.watch)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/api.py", line 374, in unschedule
    emitter = self._emitter_for_watch[watch]
KeyError: None
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/et_xmlfile/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/et_xmlfile/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/et_xmlfile/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/et_xmlfile/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/et_xmlfile/xmlfile.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/et_xmlfile/xmlfile.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/et_xmlfile/xmlfile.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/_constants.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/_constants.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/_constants.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/cell/rich_text.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/cell/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/cell/cell.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/cell/_writer.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/cell/read_only.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/cell/rich_text.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/cell/rich_text.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/cell/text.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/cell/text.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/cell/text.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/_3d.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/_3d.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/_3d.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/area_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/area_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/area_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/axis.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/axis.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/axis.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/bar_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/bar_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/bar_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/bubble_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/bubble_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/bubble_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/chartspace.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/chartspace.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/chartspace.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/data_source.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/data_source.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/data_source.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/descriptors.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/descriptors.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/descriptors.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/error_bar.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/error_bar.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/error_bar.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/label.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/label.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/label.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/layout.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/layout.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/layout.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/legend.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/legend.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/legend.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/line_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/line_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/line_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/marker.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/marker.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/marker.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/picture.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/picture.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/picture.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/pie_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/pie_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/pie_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/pivot.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/pivot.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/pivot.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/plotarea.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/plotarea.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/plotarea.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/print_settings.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/print_settings.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/print_settings.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/radar_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/radar_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/radar_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/reader.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/reader.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/reader.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/reference.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/reference.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/reference.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/scatter_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/scatter_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/scatter_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/series.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/series.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/series.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/series_factory.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/series_factory.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/series_factory.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/shapes.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/shapes.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/shapes.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/stock_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/stock_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/stock_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/surface_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/surface_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/surface_chart.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/text.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/text.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/text.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/title.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/title.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/title.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/trendline.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/trendline.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/trendline.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/updown_bars.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/updown_bars.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chart/updown_bars.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chartsheet/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chartsheet/chartsheet.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chartsheet/custom.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chartsheet/properties.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chartsheet/protection.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chartsheet/publish.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chartsheet/publish.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chartsheet/publish.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chartsheet/relation.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chartsheet/relation.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chartsheet/relation.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chartsheet/views.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chartsheet/views.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/chartsheet/views.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/comments/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/comments/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/comments/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/comments/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/comments/author.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/comments/author.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/comments/author.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/comments/comment_sheet.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/comments/comment_sheet.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/comments/comment_sheet.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/comments/comments.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/comments/comments.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/comments/comments.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/comments/shape_writer.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/comments/shape_writer.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/comments/shape_writer.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/compat/singleton.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/compat/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/compat/numbers.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/compat/abc.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/compat/product.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/compat/strings.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/descriptors/excel.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/descriptors/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/descriptors/nested.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/descriptors/namespace.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/descriptors/slots.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/descriptors/container.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/descriptors/base.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/descriptors/sequence.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/descriptors/serialisable.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/drawing/fill.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/drawing/line.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/drawing/image.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/drawing/drawing.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/drawing/picture.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/drawing/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/drawing/geometry.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/drawing/text.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/drawing/xdr.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/drawing/relation.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/drawing/colors.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/drawing/connector.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/drawing/properties.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/drawing/effect.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/drawing/graphic.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/drawing/spreadsheet_drawing.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/formatting/formatting.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/formatting/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/formatting/rule.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/formula/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/formula/tokenizer.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/formula/translate.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/packaging/relationship.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/packaging/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/packaging/manifest.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/packaging/core.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/packaging/interface.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/packaging/workbook.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/packaging/custom.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/packaging/extended.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/pivot/fields.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/pivot/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/pivot/cache.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/pivot/record.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/pivot/table.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/reader/excel.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/reader/drawings.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/reader/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/reader/workbook.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/reader/strings.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/styles/differential.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/styles/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/styles/builtins.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/styles/cell_style.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/styles/borders.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/styles/fonts.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/styles/named_styles.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/styles/styleable.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/styles/fills.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/styles/proxy.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/styles/numbers.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/styles/alignment.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/styles/colors.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/styles/table.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/styles/stylesheet.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/styles/protection.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/utils/inference.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/utils/bound_dictionary.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/utils/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/utils/datetime.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/utils/cell.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/utils/dataframe.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/utils/formulas.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/utils/indexed_list.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/utils/exceptions.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/utils/escape.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/utils/units.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/utils/protection.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/workbook/views.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/workbook/function_group.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/workbook/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/workbook/web.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/workbook/smart_tags.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/workbook/_writer.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/workbook/external_reference.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/workbook/defined_name.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/workbook/workbook.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/workbook/properties.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/workbook/protection.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/workbook/child.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/workbook/external_link/external.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/workbook/external_link/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/views.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/related.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/page.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/drawing.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/picture.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/print_settings.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/merge.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/dimensions.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/_writer.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/formula.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/controls.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/hyperlink.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/copier.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/datavalidation.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/_read_only.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/scenario.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/custom.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/ole.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/worksheet.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/table.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/_write_only.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/properties.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/header_footer.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/pagebreak.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/errors.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/smart_tag.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/cell_watch.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/protection.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/filters.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/_reader.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/worksheet/cell_range.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/writer/excel.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/writer/theme.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/writer/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/xml/functions.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/xml/__init__.py', reloading
 * Detected change in '/root/miniconda3/envs/embedding/lib/python3.10/site-packages/openpyxl/xml/constants.py', reloading
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 125-435-311
 * Detected change in '/home/to_NM/demo_NM/pages/begin_asking.py', reloading
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 125-435-311
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
127.0.0.1 - - [26/Jun/2024 22:37:43] "POST /load HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 980 user input: 姓名
----------------ChatZOC database log ----------------

distsnce: [0.4972049593925476, 0.5243831872940063, 0.70323646068573] 

知识库所有match: ['您的姓名是？', '您叫什么名字？', '您的名字是什么？']


知识库选择: 柳某
柳某
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
柳某
柳某

#医生问题#
姓名
response: 柳某。



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
柳某
柳某

#医生问题#
姓名

**************FINISHED*****************



127.0.0.1 - - [26/Jun/2024 22:37:48] "POST /chat HTTP/1.1" 200 -
student_id : plp output Liu.
未找到文件名为 Liu..mp3 的MP3文件。
无重复
student_id : plp output I am female.
未找到文件名为 I am female..mp3 的MP3文件。
无重复
student_id : 1234 output My name is Liu
有重复
student_id : 1234 output I have no history of drug allergies.
有重复
student_id : 1234 output I have no documented food allergies.
有重复
student_id : 1234 output I seem to have headaches sometimes, especially on the left side. After my eyes hurt, my head also starts to hurt.
未找到文件名为 I seem to have headaches sometimes, especially on .mp3 的MP3文件。
无重复
student_id : 1234 output I feel discomfort in my left eye.
未找到文件名为 I feel discomfort in my left eye..mp3 的MP3文件。
无重复
student_id : 1234 output My eyes suddenly hurt, became red and swollen, and my vision was blurred.
有重复
student_id : 1234 output My left eye feels uncomfortable.
有重复
student_id : 1234 output I have no food allergies.
有重复
time pass: 320 <class 'int'>
student_id : 1234 output My name is Liu
有重复
student_id : 1234 output I am seventy-four years old.
有重复
student_id : 1234 output I am female. \n\nOr you can also say: \n\nI am a woman.
未找到文件名为 I am female. \n\nOr you can also say: \n\nI am a w.mp3 的MP3文件。
无重复
student_id : 1234 output My eyes suddenly hurt, became red, and I couldn't see clearly.
有重复
student_id : 1234 output I started feeling unwell yesterday.
有重复
student_id : 12348888 output My eyes suddenly started to hurt, became red and swollen, and my vision became blurry.
未找到文件名为 My eyes suddenly started to hurt, became red and s.mp3 的MP3文件。
无重复
time pass: 1590 <class 'int'>
time pass: 1590 <class 'int'>
time pass: 1590 <class 'int'>
student_id : 9898 output My name is Liu
有重复
student_id : 1234lmj output I have an allergic reaction to sulfa drugs.
有重复
student_id : 1234lmj output I have no documented food allergies.
有重复
student_id : 980 output Liu.
有重复
  Stopping...
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/runtime.py", line 674, in _loop_coroutine
    self._session_mgr.close_session(session_info.session.id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/websocket_session_manager.py", line 147, in close_session
    active_session_info.session.shutdown()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/app_session.py", line 255, in shutdown
    self.disconnect_file_watchers()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/app_session.py", line 202, in disconnect_file_watchers
    self._local_sources_watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/local_sources_watcher.py", line 107, in close
    wm.watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 109, in close
    path_watcher.stop_watching_path(self._path, self._on_changed)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 202, in stop_watching_path
    self._observer.unschedule(folder_handler.watch)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/api.py", line 374, in unschedule
    emitter = self._emitter_for_watch[watch]
KeyError: None
2024-06-26 22:39:13.118 
Please report this bug at https://github.com/streamlit/streamlit/issues.

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/bin/streamlit", line 8, in <module>
    sys.exit(main())
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/click/core.py", line 1157, in __call__
    return self.main(*args, **kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/click/core.py", line 1078, in main
    rv = self.invoke(ctx)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/click/core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/click/core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/click/core.py", line 783, in invoke
    return __callback(*args, **kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/web/cli.py", line 234, in main_run
    _main_run(target, args, flag_options=kwargs)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/web/cli.py", line 270, in _main_run
    bootstrap.run(file, is_hello, args, flag_options)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/web/bootstrap.py", line 401, in run
    asyncio.run(run_server())
  File "/root/miniconda3/envs/embedding/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/root/miniconda3/envs/embedding/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/web/bootstrap.py", line 398, in run_server
    await server.stopped
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/runtime.py", line 674, in _loop_coroutine
    self._session_mgr.close_session(session_info.session.id)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/websocket_session_manager.py", line 147, in close_session
    active_session_info.session.shutdown()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/app_session.py", line 255, in shutdown
    self.disconnect_file_watchers()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/app_session.py", line 202, in disconnect_file_watchers
    self._local_sources_watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/local_sources_watcher.py", line 107, in close
    wm.watcher.close()
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 109, in close
    path_watcher.stop_watching_path(self._path, self._on_changed)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/watcher/event_based_path_watcher.py", line 202, in stop_watching_path
    self._observer.unschedule(folder_handler.watch)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/watchdog/observers/api.py", line 374, in unschedule
    emitter = self._emitter_for_watch[watch]
KeyError: None

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://172.21.46.28:8501
  External URL: http://47.251.88.253:8501

/root/miniconda3/envs/embedding/lib/python3.10/site-packages/pydub/utils.py:170: RuntimeWarning: Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work
  warn("Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work", RuntimeWarning)
2024-06-26 22:39:38.806 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
127.0.0.1 - - [26/Jun/2024 22:40:14] "POST /load HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id:  user input: 姓名
----------------ChatZOC database log ----------------

distsnce: [0.4972049593925476, 0.5243831872940063, 0.70323646068573] 

知识库所有match: ['您的姓名是？', '您叫什么名字？', '您的名字是什么？']


知识库选择: 柳某
柳某
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
柳某
柳某

#医生问题#
姓名
response: 柳某。



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
柳某
柳某

#医生问题#
姓名

**************FINISHED*****************



127.0.0.1 - - [26/Jun/2024 22:40:19] "POST /chat HTTP/1.1" 200 -
2024-06-26 23:37:00.548 Session with id 010313f5-8fd9-43d8-960a-693293171698 is already connected! Connecting to a new session.
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
127.0.0.1 - - [28/Jun/2024 02:34:10] "POST /load HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 1 user input: 你哪里不舒服呢
----------------ChatZOC database log ----------------

distsnce: [0.2910776734352112, 0.39069291949272156, 0.4330325126647949] 

知识库所有match: ['您怎么不舒服？', '其他还有哪里不舒服吗', '请问你有什么不舒服？']


知识库选择: 我的眼睛突然疼痛、发红，看不清东西
----------------ChatZOC database log over ----------------
127.0.0.1 - - [28/Jun/2024 02:35:03] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 1 user input: 这种症状一直这样还是会加重
----------------ChatZOC database log ----------------

distsnce: [0.3305976986885071, 0.48680323362350464, 0.5224053263664246] 

知识库所有match: ['症状是突然出现，还是逐渐加重', '这种症状是突然出现的，还是慢慢发生的', '这个症状持续了多长时间了？']


知识库选择: 我的眼睛不舒服是突然出现的
----------------ChatZOC database log over ----------------
127.0.0.1 - - [28/Jun/2024 02:35:40] "POST /chat HTTP/1.1" 200 -
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
127.0.0.1 - - [10/Jul/2024 20:04:34] "POST /load HTTP/1.1" 200 -
../knowledge_base_new/modified_7_急性原发性闭角型青光眼_1.json
成功创建知识库
127.0.0.1 - - [11/Jul/2024 10:31:51] "POST /load HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: kjl user input: 你的名字
----------------ChatZOC database log ----------------

distsnce: [0.24164295196533203, 0.2790876030921936, 0.3054617941379547] 

知识库所有match: ['您的姓名是？', '您叫什么名字？', '您的名字是什么？']


知识库选择: 柳某
----------------ChatZOC database log over ----------------
127.0.0.1 - - [11/Jul/2024 10:32:06] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: kjl user input: 你的工作是什么
----------------ChatZOC database log ----------------

distsnce: [0.04755742847919464, 0.13414767384529114, 0.2943849563598633] 

知识库所有match: ['你的工作是什么？', '您从事的是什么工作？', '您平时是从事什么工作的？']


知识库选择: 我已经退休了
----------------ChatZOC database log over ----------------
127.0.0.1 - - [11/Jul/2024 10:33:13] "POST /chat HTTP/1.1" 200 -
2024-07-11 10:33:13.949 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 533, in <module>
    tts.save("../audio/%s.mp3"%output_audio)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/gtts/tts.py", line 334, in save
    with open(str(savefile), "wb") as f:
FileNotFoundError: [Errno 2] No such file or directory: '../audio/tml lang=en>\n<title>500 Internal Server Error</tit.mp3'
../knowledge_base_new/modified_8_麦粒肿_1.json
成功创建知识库
127.0.0.1 - - [12/Jul/2024 15:40:31] "POST /load HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 123 user input: 你怎么了
----------------ChatZOC database log ----------------

distsnce: [0.07561171054840088, 0.6982840895652771, 0.7820870876312256] 

知识库所有match: ['你怎么了？', '您叫什么？', '您是怎么痛的？']


知识库选择: 我的眼皮肿了，压一下还会痛
----------------ChatZOC database log over ----------------
127.0.0.1 - - [12/Jul/2024 15:42:17] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 123 user input: 多久
----------------ChatZOC database log ----------------

distsnce: [0.3021870255470276, 0.32908207178115845, 0.6623257398605347] 

知识库所有match: ['有多久了？', '多长时间了？', '这个情况持续了多久？']


知识库选择: 眼皮红肿还有痛都是从3天前开始的，然后昨天出现了这个白点，今天更严重了
----------------ChatZOC database log over ----------------
127.0.0.1 - - [12/Jul/2024 15:42:36] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 123 user input: 你去过医生那里吗
----------------ChatZOC database log ----------------

distsnce: [0.39918792247772217, 0.42161524295806885, 0.4463840126991272] 

知识库所有match: ['有看过医生吗？', '您之前有去别的医院就诊吗？', '在发病后您是否就医过？']


知识库选择: 我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了

#医生问题#
你去过医生那里吗
response: 没有去过医生那里。



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了
我以为他自己会好的，就没有去医院看过，也没有用过眼药水，谁知道越来越严重了，就赶紧过来看了

#医生问题#
你去过医生那里吗

**************FINISHED*****************



127.0.0.1 - - [12/Jul/2024 15:45:33] "POST /chat HTTP/1.1" 200 -
------------ chatZOC api called -------------------------

student_id: 123 user input: 你以前有同样的症状吗
----------------ChatZOC database log ----------------

distsnce: [0.353833943605423, 0.4389735460281372, 0.5073899030685425] 

知识库所有match: ['你之前出现过类似的情况吗？', '您是否经历过恶心的症状？', '请问您之前出现过类似的情况吗？']


知识库选择: 印象中大概是5年前开始，两只眼睛都反复这样红肿过好几次，但之前没有这么严重，过几天他自己就好了，都不需要用药
我没有感觉恶心
印象中大概是5年前开始，两只眼睛都反复这样红肿过好几次，但之前没有这么严重，过几天他自己就好了，都不需要用药
----------------ChatZOC database log over ----------------
new_prompt: 以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
印象中大概是5年前开始，两只眼睛都反复这样红肿过好几次，但之前没有这么严重，过几天他自己就好了，都不需要用药
我没有感觉恶心
印象中大概是5年前开始，两只眼睛都反复这样红肿过好几次，但之前没有这么严重，过几天他自己就好了，都不需要用药

#医生问题#
你以前有同样的症状吗
response: 是的，我以前有过同样的症状。



**************full prompt*****************
以第一人称回答，仅回答医生提问的内容，不要回答多余的内容，不要自己延伸回答的内容，如果 #患者信息# 中没有提到，则说”我不知道“

#患者信息#
印象中大概是5年前开始，两只眼睛都反复这样红肿过好几次，但之前没有这么严重，过几天他自己就好了，都不需要用药
我没有感觉恶心
印象中大概是5年前开始，两只眼睛都反复这样红肿过好几次，但之前没有这么严重，过几天他自己就好了，都不需要用药

#医生问题#
你以前有同样的症状吗

**************FINISHED*****************



127.0.0.1 - - [12/Jul/2024 15:46:02] "POST /chat HTTP/1.1" 200 -
2024-07-13 00:43:17.073 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
2024-07-13 00:43:23.044 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 411, in __getitem__
    return self._getitem(widget_id, key)
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 456, in _getitem
    raise KeyError
KeyError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 127, in __getattr__
    return self[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 98, in __getitem__
    return get_session_state()[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/safe_session_state.py", line 93, in __getitem__
    return self._state[key]
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state.py", line 413, in __getitem__
    raise KeyError(_missing_key_error_message(key))
KeyError: 'st.session_state has no key "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 413, in <module>
    if st.session_state.option == 'ChatZOC':
  File "/root/miniconda3/envs/embedding/lib/python3.10/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__
    raise AttributeError(_missing_attr_error_message(key))
AttributeError: st.session_state has no attribute "option". Did you forget to initialize it? More info: https://docs.streamlit.io/library/advanced-features/session-state#initialization
 * Serving Flask app 'teaching_api'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8891
[33mPress CTRL+C to quit[0m
 * Restarting with watchdog (inotify)

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://172.21.46.28:8501
  External URL: http://47.251.88.253:8501

 * Debugger is active!
 * Debugger PIN: 122-334-371
  Stopping...

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://172.21.46.28:8501
  External URL: http://47.251.88.253:8501

127.0.0.1 - - [16/Jul/2024 12:41:05] "POST /load HTTP/1.1" 200 -
/root/miniconda3/envs/embedding/lib/python3.10/site-packages/pydub/utils.py:170: RuntimeWarning: Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work
  warn("Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work", RuntimeWarning)
127.0.0.1 - - [16/Jul/2024 12:41:16] "POST /chat HTTP/1.1" 200 -

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://172.21.46.28:8501
  External URL: http://47.251.88.253:8501

 * Serving Flask app 'teaching_api'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8891
[33mPress CTRL+C to quit[0m
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
127.0.0.1 - - [16/Jul/2024 13:37:08] "POST /load HTTP/1.1" 200 -
/root/miniconda3/envs/embedding/lib/python3.10/site-packages/pydub/utils.py:170: RuntimeWarning: Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work
  warn("Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work", RuntimeWarning)
127.0.0.1 - - [16/Jul/2024 13:37:18] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [16/Jul/2024 13:39:04] "POST /chat HTTP/1.1" 200 -

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.

2024-07-16 13:39:28.741 Port 8501 is already in use
 * Serving Flask app 'teaching_api'
 * Debug mode: on
Address already in use
Port 8891 is in use by another program. Either identify and stop that program, or start the server with a different port.
student_id :  output I'm female.
有重复
student_id :  output I have a son and a daughter.
有重复
  Stopping...

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://172.21.46.28:8501
  External URL: http://47.251.88.253:8501

 * Serving Flask app 'teaching_api'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8891
[33mPress CTRL+C to quit[0m
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
  Stopping...
Traceback (most recent call last):
  File "/home/to_NM/demo_NM/teaching_api.py", line 2, in <module>
    from flask import Flask, request, jsonify
ModuleNotFoundError: No module named 'flask'

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://172.21.46.28:8501
  External URL: http://47.251.88.253:8501

2024-07-21 15:33:01.131 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connection.py", line 203, in _new_conn
    sock = connection.create_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connectionpool.py", line 790, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connectionpool.py", line 496, in _make_request
    conn.request(
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connection.py", line 395, in request
    self.endheaders()
  File "/root/miniconda3/lib/python3.12/http/client.py", line 1326, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/root/miniconda3/lib/python3.12/http/client.py", line 1085, in _send_output
    self.send(msg)
  File "/root/miniconda3/lib/python3.12/http/client.py", line 1029, in send
    self.connect()
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connection.py", line 243, in connect
    self.sock = self._new_conn()
                ^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connection.py", line 218, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f4b5e7f2ff0>: Failed to establish a new connection: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/miniconda3/lib/python3.12/site-packages/requests/adapters.py", line 486, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connectionpool.py", line 844, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/util/retry.py", line 515, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8891): Max retries exceeded with url: /load (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f4b5e7f2ff0>: Failed to establish a new connection: [Errno 111] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/SP_choose.py", line 100, in <module>
    state_goal = requests.post('http://127.0.0.1:8891/load', headers={'Content-Type': 'application/json'}, json= {"load": [{"model": option+'.json'}]})
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/adapters.py", line 519, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8891): Max retries exceeded with url: /load (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f4b5e7f2ff0>: Failed to establish a new connection: [Errno 111] Connection refused'))
2024-07-21 15:33:24.376 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 17, in <module>
    from pydub import AudioSegment
ModuleNotFoundError: No module named 'pydub'
2024-07-21 15:33:40.020 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connection.py", line 203, in _new_conn
    sock = connection.create_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connectionpool.py", line 790, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connectionpool.py", line 496, in _make_request
    conn.request(
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connection.py", line 395, in request
    self.endheaders()
  File "/root/miniconda3/lib/python3.12/http/client.py", line 1326, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/root/miniconda3/lib/python3.12/http/client.py", line 1085, in _send_output
    self.send(msg)
  File "/root/miniconda3/lib/python3.12/http/client.py", line 1029, in send
    self.connect()
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connection.py", line 243, in connect
    self.sock = self._new_conn()
                ^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connection.py", line 218, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f4b5cdb1880>: Failed to establish a new connection: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/miniconda3/lib/python3.12/site-packages/requests/adapters.py", line 486, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connectionpool.py", line 844, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/util/retry.py", line 515, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8891): Max retries exceeded with url: /load (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f4b5cdb1880>: Failed to establish a new connection: [Errno 111] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/SP_choose.py", line 100, in <module>
    state_goal = requests.post('http://127.0.0.1:8891/load', headers={'Content-Type': 'application/json'}, json= {"load": [{"model": option+'.json'}]})
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/adapters.py", line 519, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8891): Max retries exceeded with url: /load (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f4b5cdb1880>: Failed to establish a new connection: [Errno 111] Connection refused'))
2024-07-21 15:33:51.846 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connection.py", line 203, in _new_conn
    sock = connection.create_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connectionpool.py", line 790, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connectionpool.py", line 496, in _make_request
    conn.request(
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connection.py", line 395, in request
    self.endheaders()
  File "/root/miniconda3/lib/python3.12/http/client.py", line 1326, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/root/miniconda3/lib/python3.12/http/client.py", line 1085, in _send_output
    self.send(msg)
  File "/root/miniconda3/lib/python3.12/http/client.py", line 1029, in send
    self.connect()
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connection.py", line 243, in connect
    self.sock = self._new_conn()
                ^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connection.py", line 218, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f4b5cdb1880>: Failed to establish a new connection: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/miniconda3/lib/python3.12/site-packages/requests/adapters.py", line 486, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connectionpool.py", line 844, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/util/retry.py", line 515, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8891): Max retries exceeded with url: /load (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f4b5cdb1880>: Failed to establish a new connection: [Errno 111] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/SP_choose.py", line 100, in <module>
    state_goal = requests.post('http://127.0.0.1:8891/load', headers={'Content-Type': 'application/json'}, json= {"load": [{"model": option+'.json'}]})
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/adapters.py", line 519, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8891): Max retries exceeded with url: /load (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f4b5cdb1880>: Failed to establish a new connection: [Errno 111] Connection refused'))
2024-07-22 18:45:00.283 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connection.py", line 203, in _new_conn
    sock = connection.create_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connectionpool.py", line 790, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connectionpool.py", line 496, in _make_request
    conn.request(
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connection.py", line 395, in request
    self.endheaders()
  File "/root/miniconda3/lib/python3.12/http/client.py", line 1326, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/root/miniconda3/lib/python3.12/http/client.py", line 1085, in _send_output
    self.send(msg)
  File "/root/miniconda3/lib/python3.12/http/client.py", line 1029, in send
    self.connect()
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connection.py", line 243, in connect
    self.sock = self._new_conn()
                ^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connection.py", line 218, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f4b6e222180>: Failed to establish a new connection: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/miniconda3/lib/python3.12/site-packages/requests/adapters.py", line 486, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/connectionpool.py", line 844, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/urllib3/util/retry.py", line 515, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8891): Max retries exceeded with url: /load (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f4b6e222180>: Failed to establish a new connection: [Errno 111] Connection refused'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/miniconda3/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/SP_choose.py", line 100, in <module>
    state_goal = requests.post('http://127.0.0.1:8891/load', headers={'Content-Type': 'application/json'}, json= {"load": [{"model": option+'.json'}]})
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/miniconda3/lib/python3.12/site-packages/requests/adapters.py", line 519, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8891): Max retries exceeded with url: /load (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f4b6e222180>: Failed to establish a new connection: [Errno 111] Connection refused'))
 * Serving Flask app 'teaching_api'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8891
[33mPress CTRL+C to quit[0m
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
127.0.0.1 - - [22/Jul/2024 18:50:41] "POST /load HTTP/1.1" 200 -
2024-07-22 18:51:01.425 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 17, in <module>
    from pydub import AudioSegment
ModuleNotFoundError: No module named 'pydub'
127.0.0.1 - - [22/Jul/2024 18:52:22] "POST /load HTTP/1.1" 200 -
2024-07-22 18:52:23.564 Uncaught app exception
Traceback (most recent call last):
  File "/root/miniconda3/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 600, in _run_script
    exec(code, module.__dict__)
  File "/home/to_NM/demo_NM/pages/begin_asking.py", line 17, in <module>
    from pydub import AudioSegment
ModuleNotFoundError: No module named 'pydub'
  Stopping...

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://172.21.46.28:8501
  External URL: http://47.251.88.253:8501

127.0.0.1 - - [22/Jul/2024 18:54:54] "POST /load HTTP/1.1" 200 -
/root/miniconda3/envs/embedding/lib/python3.10/site-packages/pydub/utils.py:170: RuntimeWarning: Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work
  warn("Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work", RuntimeWarning)
  Stopping...

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://172.21.46.28:8501
  External URL: http://47.251.88.253:8501

 * Serving Flask app 'teaching_api'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8891
[33mPress CTRL+C to quit[0m
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
127.0.0.1 - - [24/Jul/2024 09:42:57] "POST /load HTTP/1.1" 200 -
/root/miniconda3/envs/embedding/lib/python3.10/site-packages/pydub/utils.py:170: RuntimeWarning: Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work
  warn("Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work", RuntimeWarning)
127.0.0.1 - - [24/Jul/2024 09:43:05] "POST /chat HTTP/1.1" 200 -
student_id : 9898 output Liu.
有重复
  Stopping...

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://172.21.46.28:8501
  External URL: http://47.251.88.253:8501


  A new version of Streamlit is available.

  See what's new at https://discuss.streamlit.io/c/announcements

  Enter the following command to upgrade:
  $ pip install streamlit --upgrade

 * Serving Flask app 'teaching_api'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8891
[33mPress CTRL+C to quit[0m
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
  Stopping...

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://172.21.46.28:8501
  External URL: http://47.251.88.253:8501

 * Serving Flask app 'teaching_api'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8891
[33mPress CTRL+C to quit[0m
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 122-334-371
127.0.0.1 - - [29/Jul/2024 09:54:16] "POST /load HTTP/1.1" 200 -
/root/miniconda3/envs/embedding/lib/python3.10/site-packages/pydub/utils.py:170: RuntimeWarning: Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work
  warn("Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work", RuntimeWarning)
127.0.0.1 - - [29/Jul/2024 09:54:23] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [29/Jul/2024 09:54:38] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [01/Aug/2024 18:11:52] "POST /load HTTP/1.1" 200 -
127.0.0.1 - - [01/Aug/2024 18:12:19] "POST /chat HTTP/1.1" 200 -
127.0.0.1 - - [07/Aug/2024 18:03:50] "POST /load HTTP/1.1" 200 -
127.0.0.1 - - [07/Aug/2024 18:04:22] "POST /chat HTTP/1.1" 200 -
student_id : kjl output Liu.
有重复
student_id : kjl output My eyes suddenly hurt and became red and swollen, and my vision became blurry.
有重复
student_id : lmj-0801-1 output My name is Liu
有重复
student_id : 1 output My eyes suddenly hurt, became red and swollen, and my vision became blurry.
有重复
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10] <class 'list'>
1
set null
/
set null
2
set null
/
set null
3
set null
/
set null
4
set null
/
set null
5
set null
/
set null
6
set null
/
set null
7
set null
/
set null
8
set null
/
set null
9
set null
/
set null
10
set null
/
set null
[12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 46, 47, 48, 49, 50] <class 'list'>
12
眼别
13
时间
14
进展
15
症状本身
16
/
set null
17
/
set null
18
/
set null
19
/
set null
20
/
set null
21
症状本身
22
症状本身
23
症状性质
24
/
set null
25
/
set null
26
症状本身
28
症状本身
29
症状本身
30
症状本身
31
症状本身
32
症状本身
33
症状本身
34
症状本身
35
症状本身
36
症状本身
37
症状本身
38
症状本身
39
症状性质
40
症状本身
41
症状本身
42
症状本身
43
症状本身
44
/
set null
46
/
set null
47
/
set null
48
/
set null
49
/
set null
50
/
set null
[51, 52, 53, 54, 55, 56, 57, 58, 59, 63, 66, 67, 68, 69, 70, 71, 72, 73, 74] <class 'list'>
51
/
set null
52
/
set null
53
set null
/
set null
54
疾病本身
55
发病时长
56
严重程度
57
治疗方案
58
治疗效果
59
疾病本身
63
疾病本身
66
疾病本身
67
疾病本身
68
疾病本身
69
疾病本身
70
疾病本身
71
/
set null
72
/
set null
73
/
set null
74
/
set null
[75, 76, 77, 78, 79, 80, 81] <class 'list'>
75
/
set null
76
/
set null
77
/
set null
78
/
set null
79
/
set null
80
/
set null
81
/
set null
[82, 83, 84, 85] <class 'list'>
82
set null
/
set null
83
set null
/
set null
84
set null
/
set null
85
set null
/
set null
[86, 87, 88] <class 'list'>
86
/
set null
87
/
set null
88
/
set null
[92, 93] <class 'list'>
92
set null
/
set null
93
set null
/
set null
  Stopping...

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://172.21.46.28:8501
  External URL: http://47.251.88.253:8501

/root/miniconda3/envs/embedding/lib/python3.10/site-packages/pydub/utils.py:170: RuntimeWarning: Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work
  warn("Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work", RuntimeWarning)
 * Serving Flask app 'teaching_api'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8891
[33mPress CTRL+C to quit[0m
 * Restarting with watchdog (inotify)
 * Debugger is active!
 * Debugger PIN: 125-435-311
127.0.0.1 - - [09/Aug/2024 09:36:44] "POST /load HTTP/1.1" 200 -
127.0.0.1 - - [09/Aug/2024 09:36:52] "POST /chat HTTP/1.1" 200 -
